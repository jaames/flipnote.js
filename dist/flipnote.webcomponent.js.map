{"version":3,"file":"flipnote.webcomponent.js.map","sources":["../node_modules/svelte/internal/index.mjs","../node_modules/tslib/tslib.es6.js","../src/loaders/urlLoader.ts","../src/loaders/fileLoader.ts","../src/loaders/arrayBufferLoader.ts","../src/loaders/index.ts","../src/utils/byteArray.ts","../src/utils/dataStream.ts","../src/parsers/parserBase.ts","../src/parsers/adpcm.ts","../src/parsers/ppm.ts","../src/parsers/kwzTables.ts","../src/parsers/kwz.ts","../src/parsers/index.ts","../src/encoders/wav.ts","../src/player/audio.ts","../src/webgl/canvas.ts","../src/player/index.ts","../src/components/utils.ts","../src/components/Slider.svelte","../src/components/Icon.svelte","../src/components/Player.svelte","../src/encoders/lzw.ts","../src/encoders/gif.ts","../src/flipnote.ts","../src/webcomponent.ts"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? undefined : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    const z_index = (parseInt(computed_style.zIndex) || 0) - 1;\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', `display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ` +\n        `overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${z_index};`);\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = `data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>`;\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error(`Function called outside component initialization`);\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error(`Cannot have duplicate keys in a keyed each`);\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += \" \" + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += \" \" + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : ``;\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if ($$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set() {\n            // overridden by instance, if it has props\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set() {\n        // overridden by instance, if it has props\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.24.0' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev(\"SvelteDOMRemove\", { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? [\"capture\"] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev(\"SvelteDOMAddEventListener\", { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev(\"SvelteDOMRemoveEventListener\", { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev(\"SvelteDOMRemoveAttribute\", { node, attribute });\n    else\n        dispatch_dev(\"SvelteDOMSetAttribute\", { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev(\"SvelteDOMSetProperty\", { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev(\"SvelteDOMSetDataset\", { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev(\"SvelteDOMSetData\", { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(`'target' is a required option`);\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn(`Component was already destroyed`); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error(`Infinite loop detected`);\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, update_slot, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export default {\n\n  matches: function(source: any): boolean {\n    return typeof source === 'string';\n  },\n\n  load: function(source: string, resolve: Function, reject: Function): void {\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', source, true);\n    xhr.responseType = 'arraybuffer'; \n    xhr.onreadystatechange = function (e) {\n      if (xhr.readyState === 4) {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          resolve(xhr.response);\n        } else {\n          reject({\n            type: 'httpError',\n            status: xhr.status,\n            statusText: xhr.statusText\n          });\n        }\n      }\n    };\n    xhr.send(null);\n  }\n\n}","export default {\n\n  matches: function(source: any): boolean {\n    return (typeof File !== 'undefined' && source instanceof File);\n  },\n\n  load: function(source: File, resolve: Function, reject: Function): void {\n    if (typeof FileReader !== 'undefined') {\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        resolve(reader.result);\n      };\n      reader.onerror = (event) => {\n        reject({type: 'fileReadError'});\n      };\n      reader.readAsArrayBuffer(source);\n    } else {\n      reject();\n    }\n  }\n\n}","export default {\n\n  matches: function(source: any): boolean {\n    return (source instanceof ArrayBuffer);\n  },\n\n  load: function(source: ArrayBuffer, resolve: Function, reject: Function): void {\n    resolve(source);\n  }\n\n}","import urlLoader from './urlLoader';\nimport fileLoader from './fileLoader';\nimport arrayBufferLoader from './arrayBufferLoader';\n\nconst loaders = [\n  urlLoader,\n  fileLoader,\n  arrayBufferLoader\n];\n\nexport function loadSource(source: any) {\n  return new Promise(function (resolve, reject) {\n    loaders.forEach(loader => {\n      if (loader.matches(source)) {\n        loader.load(source, resolve, reject);\n      }\n    });\n  });\n}","export class ByteArray {\n\n  static pageSize: number = 4096;\n\n  private page: number = -1;\n  private pages: Uint8Array[] = [];\n  private cursor: number = 0;\n\n  constructor() {\n    this.newPage();\n  }\n  \n  private newPage() {\n    this.pages[++this.page] = new Uint8Array(ByteArray.pageSize);\n    this.cursor = 0;\n  }\n  \n  public getData() {\n    const data = new Uint8Array((this.page) * ByteArray.pageSize + this.cursor);\n    this.pages.map((page, index) => {\n      if (index === this.page) {\n        data.set(page.slice(0, this.cursor), index * ByteArray.pageSize);\n      } else {\n        data.set(page, index * ByteArray.pageSize);\n      }\n    });\n    return data;\n  }\n\n  public getBuffer() {\n    const data = this.getData();\n    return data.buffer;\n  }\n  \n  public writeByte(val: number) {\n    if (this.cursor >= ByteArray.pageSize) this.newPage();\n    this.pages[this.page][this.cursor++] = val;\n  }\n\n  public writeBytes(array: Uint8Array | number[], offset?: number, length?: number) {\n    for (let l = length || array.length, i = offset || 0; i < l; i++)\n      this.writeByte(array[i]);\n  }\n}","/** datastream serves as a wrapper around the DataView API to help keep track of the offset into the stream */\nexport const enum SeekOrigin {\n  Begin,\n  Current,\n  End\n};\n\nexport class DataStream {\n\n  public buffer: ArrayBuffer;\n  private data: DataView;\n  private cursor: number;\n\n  constructor(arrayBuffer: ArrayBuffer) {\n    this.buffer = arrayBuffer;\n    this.data = new DataView(arrayBuffer);\n    this.cursor = 0;\n  }\n\n  get bytes() {\n    return new Uint8Array(this.buffer);\n  }\n\n  get byteLength() {\n    return this.data.byteLength;\n  }\n\n  public seek(offset: number, whence?: SeekOrigin) {\n    switch (whence) {\n      case SeekOrigin.End:\n        this.cursor = this.data.byteLength + offset;\n        break;\n      case SeekOrigin.Current:\n        this.cursor += offset;\n        break;\n      case SeekOrigin.Begin:\n      default:\n        this.cursor = offset;\n        break;\n    }\n  }\n\n  public readUint8() {\n    const val = this.data.getUint8(this.cursor);\n    this.cursor += 1;\n    return val;\n  }\n\n  public writeUint8(value: number) {\n    this.data.setUint8(this.cursor, value);\n    this.cursor += 1;\n  }\n\n  public readInt8() {\n    const val = this.data.getInt8(this.cursor);\n    this.cursor += 1;\n    return val;\n  }\n\n  public writeInt8(value: number) {\n    this.data.setInt8(this.cursor, value);\n    this.cursor += 1;\n  }\n\n  public readUint16(littleEndian: boolean=true) {\n    const val = this.data.getUint16(this.cursor, littleEndian);\n    this.cursor += 2;\n    return val;\n  }\n\n  public writeUint16(value: number, littleEndian: boolean=true) {\n    this.data.setUint16(this.cursor, value, littleEndian);\n    this.cursor += 2;\n  }\n\n  public readInt16(littleEndian: boolean=true) {\n    const val = this.data.getInt16(this.cursor, littleEndian);\n    this.cursor += 2;\n    return val;\n  }\n\n  public writeInt16(value: number, littleEndian: boolean=true) {\n    this.data.setInt16(this.cursor, value, littleEndian);\n    this.cursor += 2;\n  }\n\n  public readUint32(littleEndian: boolean=true) {\n    const val = this.data.getUint32(this.cursor, littleEndian);\n    this.cursor += 4;\n    return val;\n  }\n  \n  public writeUint32(value: number, littleEndian: boolean=true) {\n    this.data.setUint32(this.cursor, value, littleEndian);\n    this.cursor += 4;\n  }\n\n  public readInt32(littleEndian: boolean=true) {\n    const val = this.data.getInt32(this.cursor, littleEndian);\n    this.cursor += 4;\n    return val;\n  }\n\n  public writeInt32(value: number, littleEndian: boolean=true) {\n    this.data.setInt32(this.cursor, value, littleEndian);\n    this.cursor += 4;\n  }\n\n  public readBytes(count: number) {\n    const bytes = new Uint8Array(this.data.buffer, this.cursor, count);\n    this.cursor += bytes.byteLength;\n    return bytes;\n  }\n\n  public writeBytes(bytes: number[] | Uint8Array) {\n    bytes.forEach((byte: number) => this.writeUint8(byte));\n  }\n\n  public readHex(count: number, reverse: boolean=false) {\n    const bytes = this.readBytes(count);\n    let hex = [];\n    for (let i = 0; i < bytes.length; i++) {\n      hex.push(bytes[i].toString(16).padStart(2, '0'));\n    }\n    if (reverse) hex.reverse();\n    return hex.join('').toUpperCase();\n  }\n\n  public readUtf8(count: number) {\n    const chars = this.readBytes(count);\n    let str = '';\n    for (let i = 0; i < chars.length; i++) {\n      const char = chars[i];\n      if (char === 0) break;\n      str += String.fromCharCode(char);\n    }\n    return str;\n  }\n\n  public writeUtf8(string: string) {\n    for (let i = 0; i < string.length; i++) {\n      const char = string.charCodeAt(i);\n      this.writeUint8(char);\n    }\n  }\n\n  public readUtf16(count: number) {\n    const chars = new Uint16Array(this.data.buffer, this.cursor, count);\n    let str = '';\n    for (let i = 0; i < chars.length; i++) {\n      const char = chars[i];\n      if (char == 0) break;\n      str += String.fromCharCode(char);\n    }\n    this.cursor += chars.byteLength;\n    return str;\n  }\n}","import { DataStream } from '../utils/index';\n\nexport type PaletteColor = [number, number, number]; // r, g, b\n\nexport type PaletteDefinition = {\n  [key in any]?: PaletteColor;\n};\n\nexport enum FlipnoteAudioTrack {\n  BGM,\n  SE1,\n  SE2,\n  SE3,\n  SE4\n};\n\nexport type FlipnoteAudioTrackInfo = {\n  [key in FlipnoteAudioTrack]?: {\n    offset: number,\n    length: number\n  }\n}\n\nexport abstract class FlipnoteParserBase extends DataStream {\n\n  static type: string;\n  static sampleRate: number;\n  static width: number;\n  static height: number;\n  static globalPalette: PaletteColor[];\n\n  public type: string\n  public width: number;\n  public height: number;\n  public palette: PaletteDefinition;\n  public globalPalette: PaletteColor[];\n\n  public meta: any;\n  public soundMeta: FlipnoteAudioTrackInfo;\n\n  public frameCount: number;\n  public frameSpeed: number;\n  public bgmSpeed: number;\n  public framerate: number;\n  public bgmrate: number;\n  public sampleRate: number;\n  public thumbFrameIndex: number;\n\n  abstract decodeFrame(frameIndex: number): Uint8Array[];\n\n  abstract getLayerPixels(frameIndex: number, layerIndex: number): Uint8Array | Uint16Array;\n\n  abstract getLayerOrder(frameIndex: number): number[];\n\n  abstract getFramePixels(frameIndex: number): Uint8Array;\n\n  abstract getFramePaletteIndices(frameIndex: number): number[];\n  \n  abstract getFramePalette(frameIndex: number): PaletteColor[];\n\n  abstract decodeAudio(trackId: FlipnoteAudioTrack): Int16Array;\n\n  abstract decodeSoundFlags(): number[][];\n\n  public hasAudioTrack(trackId: FlipnoteAudioTrack): boolean {\n    if (this.soundMeta.hasOwnProperty(trackId) && this.soundMeta[trackId].length > 0) {\n      return true;\n    } \n    return false;\n  }\n\n  public getInt16AudioData(trackId: FlipnoteAudioTrack) {\n    return this.decodeAudio(trackId);\n  }\n\n  public getFloat32AudioData(trackId: FlipnoteAudioTrack) {\n    const pcm16 = this.decodeAudio(trackId);\n    const outbuffer = new Float32Array(pcm16.length);\n    for (let i = 0; i < pcm16.length; i++) {\n      outbuffer[i] = pcm16[i] / 32767;\n    }\n    return outbuffer;\n  }\n}","export const ADPCM_INDEX_TABLE_2 = new Int8Array([\n  -1, 2, -1, 2\n]);\n\nexport const ADPCM_INDEX_TABLE_4 = new Int8Array([\n  -1, -1, -1, -1, 2, 4, 6, 8,\n  -1, -1, -1, -1, 2, 4, 6, 8\n]);\n\n// note that this is a slight deviation from the normal adpcm table\nexport const ADPCM_STEP_TABLE = new Int16Array([\n  7, 8, 9, 10, 11, 12, 13, 14, 16, 17,\n  19, 21, 23, 25, 28, 31, 34, 37, 41, 45,\n  50, 55, 60, 66, 73, 80, 88, 97, 107, 118,\n  130, 143, 157, 173, 190, 209, 230, 253, 279, 307,\n  337, 371, 408, 449, 494, 544, 598, 658, 724, 796,\n  876, 963, 1060, 1166, 1282, 1411, 1552, 1707, 1878, 2066,\n  2272, 2499, 2749, 3024, 3327, 3660, 4026, 4428, 4871, 5358,\n  5894, 6484, 7132, 7845, 8630, 9493, 10442, 11487, 12635, 13899,\n  15289, 16818, 18500, 20350, 22385, 24623, 27086, 29794, 32767, 0\n]);\n\nexport const ADPCM_SAMPLE_TABLE_2 = new Int16Array(90 * 4);\nfor (let sample = 0; sample < 4; sample++) {\n  for (let stepIndex = 0; stepIndex < 90; stepIndex++) {\n    let step = ADPCM_STEP_TABLE[stepIndex];\n    let diff = step >> 3;\n    if (sample & 1) diff += step;\n    if (sample & 2) diff = -diff;\n    ADPCM_SAMPLE_TABLE_2[sample + 4 * stepIndex] = diff;\n  }\n}\n\nexport const ADPCM_SAMPLE_TABLE_4 = new Int16Array(90 * 16);\nfor (let sample = 0; sample < 16; sample++) {\n  for (let stepIndex = 0; stepIndex < 90; stepIndex++) {\n    let step = ADPCM_STEP_TABLE[stepIndex];\n    let diff = step >> 3;\n    if (sample & 4) diff += step;\n    if (sample & 2) diff += step >> 1;\n    if (sample & 1) diff += step >> 2;\n    if (sample & 8) diff = -diff;\n    ADPCM_SAMPLE_TABLE_4[sample + 16 * stepIndex] = diff;\n  }\n}","/**\n * PPM decoder\n * Reads frames, audio, and metadata from Flipnote Studio PPM files \n * Based on my Python PPM decoder implementation (https://github.com/jaames/flipnote-tools)\n *  \n * Credits:\n *  PPM format reverse-engineering and documentation:\n *   - bricklife (http://ugomemo.g.hatena.ne.jp/bricklife/20090307/1236391313)\n *   - mirai-iro (http://mirai-iro.hatenablog.jp/entry/20090116/ugomemo_ppm)\n *   - harimau_tigris (http://ugomemo.g.hatena.ne.jp/harimau_tigris)\n *   - steven (http://www.dsibrew.org/wiki/User:Steven)\n *   - yellows8 (http://www.dsibrew.org/wiki/User:Yellows8)\n *   - PBSDS (https://github.com/pbsds)\n *   - jaames (https://github.com/jaames)\n *  Identifying the PPM sound codec:\n *   - Midmad from Hatena Haiku\n *   - WDLMaster from hcs64.com\n *  Helping me to identify issues with the Python decoder that this is based on:\n *   - Austin Burk (https://sudomemo.net)\n * \n *  Lastly, a huge thanks goes to Nintendo for creating Flipnote Studio, \n *  and to Hatena for providing the Flipnote Hatena online service, both of which inspired so many c:\n*/\n\nimport { \n  PaletteDefinition,\n  FlipnoteAudioTrack,\n  FlipnoteParserBase\n} from './parserBase';\n\nimport {\n  ADPCM_INDEX_TABLE_4,\n  ADPCM_SAMPLE_TABLE_4\n} from './adpcm';\n\n// internal frame speed value -> FPS table\nconst FRAMERATES = [\n  null,\n  0.5,\n  1,\n  2,\n  4,\n  6,\n  12,\n  20,\n  30,\n];\n\nconst PALETTE: PaletteDefinition = {\n  WHITE: [0xff, 0xff, 0xff],\n  BLACK: [0x0e, 0x0e, 0x0e],\n  RED:   [0xff, 0x2a, 0x2a],\n  BLUE:  [0x0a, 0x39, 0xff],\n};\n\nexport interface PpmMeta {\n  lock: boolean;\n  loop: boolean;\n  frame_count: number;\n  frame_speed: number;\n  bgm_speed: number;\n  thumb_index: number;\n  timestamp: Date;\n  spinoff: boolean;\n  root: {\n    filename: string;\n    username: string;\n    fsid: string;\n  },\n  parent: {\n    filename: string;\n    username: string;\n    fsid: string;\n  },\n  current: {\n    filename: string;\n    username: string;\n    fsid: string;\n  },\n};\n\nexport class PpmParser extends FlipnoteParserBase {\n\n  static type: string = 'PPM';\n  static width: number = 256;\n  static height: number = 192;\n  static sampleRate: number = 8192;\n  static globalPalette = [\n    PALETTE.WHITE,\n    PALETTE.BLACK,\n    PALETTE.RED,\n    PALETTE.BLUE\n  ];\n\n  public type: string = PpmParser.type;\n  public width: number = PpmParser.width;\n  public height: number = PpmParser.height;\n  public globalPalette = PpmParser.globalPalette;\n  public sampleRate = PpmParser.sampleRate;\n  public meta: PpmMeta;\n  public version: number;\n\n  private layers: Uint8Array[];\n  private prevLayers: Uint8Array[];\n  private prevDecodedFrame: number = null;\n  private frameDataLength: number;\n  private soundDataLength: number;\n  private frameOffsets: Uint32Array;\n\n  constructor(arrayBuffer: ArrayBuffer) {\n    super(arrayBuffer);\n    this.decodeHeader();\n    this.decodeAnimationHeader();\n    this.decodeSoundHeader();\n    this.decodeMeta();\n    // create image buffers\n    this.layers = [\n      new Uint8Array(PpmParser.width * PpmParser.height),\n      new Uint8Array(PpmParser.width * PpmParser.height)\n    ];\n    this.prevLayers = [\n      new Uint8Array(PpmParser.width * PpmParser.height),\n      new Uint8Array(PpmParser.width * PpmParser.height)\n    ];\n    this.prevDecodedFrame = null;\n  }\n\n  static validateFSID(fsid: string) {\n    return /[0159]{1}[0-9A-F]{6}0[0-9A-F]{8}/.test(fsid);\n  }\n\n  static validateFilename(filename: string) {\n    return /[0-9A-F]{6}_[0-9A-F]{13}_[0-9]{3}/.test(filename);\n  }\n\n  private readFilename() {\n    return [\n      this.readHex(3),\n      this.readUtf8(13),\n      this.readUint16().toString().padStart(3, '0')\n    ].join('_');\n  }\n\n  private readLineEncoding() {\n    const unpacked = new Uint8Array(PpmParser.height);\n    for (var byteIndex = 0; byteIndex < 48; byteIndex ++) {\n      const byte = this.readUint8();\n      // each line's encoding type is stored as a 2-bit value\n      for (var bitOffset = 0; bitOffset < 8; bitOffset += 2) {\n        unpacked[byteIndex * 4 + bitOffset / 2] = (byte >> bitOffset) & 0x03;\n      }\n    }\n    return unpacked;\n  }\n\n  private decodeHeader() {\n    this.seek(0);\n    // decode header\n    // https://github.com/pbsds/hatena-server/wiki/PPM-format#file-header\n    let magic = this.readUint32();\n    this.frameDataLength = this.readUint32();\n    this.soundDataLength = this.readUint32();\n    this.frameCount = this.readUint16() + 1;\n    this.version = this.readUint16();\n  }\n\n  private decodeMeta() {\n    // https://github.com/pbsds/hatena-server/wiki/PPM-format#file-header\n    this.seek(0x10);\n    const lock = this.readUint16(),\n          thumbIndex = this.readInt16(),\n          rootAuthorName = this.readUtf16(11),\n          parentAuthorName = this.readUtf16(11),\n          currentAuthorName = this.readUtf16(11),\n          parentAuthorId = this.readHex(8, true),\n          currentAuthorId = this.readHex(8, true),\n          parentFilename = this.readFilename(),\n          currentFilename = this.readFilename(),\n          rootAuthorId = this.readHex(8, true);\n    this.seek(0x9A);\n    const timestamp = new Date((this.readUint32() + 946684800) * 1000);\n    this.seek(0x06A6);\n    const flags = this.readUint16();\n    this.thumbFrameIndex = thumbIndex;\n    this.meta = {\n      lock: lock === 1,\n      loop: (flags >> 1 & 0x01) === 1,\n      frame_count: this.frameCount,\n      frame_speed: this.frameSpeed,\n      bgm_speed: this.bgmSpeed,\n      thumb_index: thumbIndex,\n      timestamp: timestamp,\n      spinoff: (currentAuthorId !== parentAuthorId) || (currentAuthorId !== rootAuthorId),\n      root: {\n        filename: null,\n        username: rootAuthorName,\n        fsid: rootAuthorId,\n      },\n      parent: {\n        username: parentAuthorName,\n        fsid: parentAuthorId,\n        filename: parentFilename\n      },\n      current: {\n        username: currentAuthorName,\n        fsid: currentAuthorId,\n        filename: currentFilename\n      },\n    };\n  }\n\n  private decodeAnimationHeader() {\n    // jump to the start of the animation data section\n    // https://github.com/pbsds/hatena-server/wiki/PPM-format#animation-data-section\n    this.seek(0x06A0);\n    const offsetTableLength = this.readUint16();\n    // skip padding + flags\n    this.seek(0x06A8);\n    // read frame offsets and build them into a table\n    this.frameOffsets = new Uint32Array(offsetTableLength / 4).map(value => {\n      return 0x06A8 + offsetTableLength + this.readUint32();\n    });\n  }\n\n  private decodeSoundHeader() {\n    // https://github.com/pbsds/hatena-server/wiki/PPM-format#sound-data-section\n    // offset = frame data offset + frame data length + sound effect flags\n    let offset = 0x06A0 + this.frameDataLength + this.frameCount;\n    // account for multiple-of-4 padding\n    if (offset % 4 != 0) offset += 4 - (offset % 4);\n    this.seek(offset);\n    const bgmLen = this.readUint32();\n    const se1Len = this.readUint32();\n    const se2Len = this.readUint32();\n    const se3Len = this.readUint32();\n    this.frameSpeed = 8 - this.readUint8();\n    this.bgmSpeed = 8 - this.readUint8();\n    offset += 32;\n    this.framerate = FRAMERATES[this.frameSpeed];\n    this.bgmrate = FRAMERATES[this.bgmSpeed];\n    this.soundMeta = {\n      [FlipnoteAudioTrack.BGM]: {offset: offset,           length: bgmLen},\n      [FlipnoteAudioTrack.SE1]: {offset: offset += bgmLen, length: se1Len},\n      [FlipnoteAudioTrack.SE2]: {offset: offset += se1Len, length: se2Len},\n      [FlipnoteAudioTrack.SE3]: {offset: offset += se2Len, length: se3Len},\n    };\n  }\n\n  public isNewFrame(frameIndex: number) {\n    this.seek(this.frameOffsets[frameIndex]);\n    const header = this.readUint8();\n    return (header >> 7) & 0x1;\n  }\n\n  public getLayerOrder(frameIndex?: number) {\n    return [0, 1];\n  }\n\n  public decodeFrame(frameIndex: number) {\n    if ((frameIndex !== 0) && (this.prevDecodedFrame !== frameIndex - 1) && (!this.isNewFrame(frameIndex)))\n      this.decodeFrame(frameIndex - 1);\n    // https://github.com/pbsds/hatena-server/wiki/PPM-format#animation-frame\n    this.seek(this.frameOffsets[frameIndex]);\n    const header = this.readUint8();\n    const isNewFrame = (header >> 7) & 0x1;\n    const isTranslated = (header >> 5) & 0x3;\n    let translateX = 0;\n    let translateY = 0;\n    // copy the current layer buffers to the previous ones\n    this.prevLayers[0].set(this.layers[0]);\n    this.prevLayers[1].set(this.layers[1]);\n    this.prevDecodedFrame = frameIndex;\n    // reset current layer buffers\n    this.layers[0].fill(0);\n    this.layers[1].fill(0);\n\n    if (isTranslated) {\n      translateX = this.readInt8();\n      translateY = this.readInt8();\n    }\n\n    const layerEncoding = [\n      this.readLineEncoding(),\n      this.readLineEncoding(),\n    ];\n     // start decoding layer bitmaps\n    for (let layer = 0; layer < 2; layer++) {\n      const layerBitmap = this.layers[layer];\n      for (let line = 0; line < PpmParser.height; line++) {\n        const lineType = layerEncoding[layer][line];\n        let chunkOffset = line * PpmParser.width;\n        switch(lineType) {\n          // line type 0 = blank line, decode nothing\n          case 0:\n            break;\n          // line types 1 + 2 = compressed bitmap line\n          case 1:\n          case 2:\n            let lineHeader = this.readUint32(false);\n            // line type 2 starts as an inverted line\n            if (lineType == 2) layerBitmap.fill(0xFF, chunkOffset, chunkOffset + PpmParser.width);\n            // loop through each bit in the line header\n            while (lineHeader & 0xFFFFFFFF) {\n              // if the bit is set, this 8-pix wide chunk is stored\n              // else we can just leave it blank and move on to the next chunk\n              if (lineHeader & 0x80000000) {\n                const chunk = this.readUint8();\n                // unpack chunk bits\n                for (let pixel = 0; pixel < 8; pixel++) {\n                  layerBitmap[chunkOffset + pixel] = (chunk >> pixel & 0x1) ? 0xFF : 0x00;\n                }\n              }\n              chunkOffset += 8;\n              // shift lineheader to the left by 1 bit, now on the next loop cycle the next bit will be checked\n              lineHeader <<= 1;\n            }\n            break;\n          // line type 3 = raw bitmap line\n          case 3:\n            while(chunkOffset < (line + 1) * PpmParser.width) {\n              const chunk = this.readUint8();\n              for (let pixel = 0; pixel < 8; pixel++) {\n                layerBitmap[chunkOffset + pixel] = (chunk >> pixel & 0x1) ? 0xFF : 0x00;\n              }\n              chunkOffset += 8;\n            }\n            break;\n        }\n      }\n    }\n    // if the current frame is based on changes from the preivous one, merge them by XORing their values\n    if (!isNewFrame) {\n      let dest: number, src: number;\n      // loop through each line\n      for (let y = 0; y < PpmParser.height; y++) {\n        // skip to next line if this one falls off the top edge of the screen\n        if (y - translateY < 0) continue;\n        // stop once the bottom screen edge has been reached\n        if (y - translateY >= PpmParser.height) break;\n        // loop through each pixel in the line\n        for (let x = 0; x < PpmParser.width; x++) {\n          // skip to the next pixel if this one falls off the left edge of the screen\n          if (x - translateX < 0) continue;\n          // stop diffing this line once the right screen edge has been reached\n          if (x - translateX >= PpmParser.width) break;\n          dest = x + y * PpmParser.width;\n          src = dest - (translateX + translateY * PpmParser.width);\n          // diff pixels with a binary XOR\n          this.layers[0][dest] ^= this.prevLayers[0][src];\n          this.layers[1][dest] ^= this.prevLayers[1][src];\n        }\n      }\n    }\n    return this.layers;\n  }\n\n  public getFramePaletteIndices(frameIndex: number) {\n    this.seek(this.frameOffsets[frameIndex]);\n    const header = this.readUint8();\n    const isInverted = (header & 0x1) !== 1;\n    const penMap = [\n      isInverted ? 0 : 1, // pen index 0 isn't used in normal cases\n      isInverted ? 0 : 1,\n      2,\n      3,\n    ];\n    return [\n      isInverted ? 1 : 0, // paper\n      penMap[(header >> 1) & 0x3], // layer 1 color\n      penMap[(header >> 3) & 0x3], // layer 2 color\n    ];\n  }\n\n  public getFramePalette(frameIndex: number) {\n    const indices = this.getFramePaletteIndices(frameIndex);\n    return indices.map(colorIndex => this.globalPalette[colorIndex]);\n  }\n\n  // retuns an uint8 array where each item is a pixel's palette index\n  public getLayerPixels(frameIndex: number, layerIndex: number) {\n    if (this.prevDecodedFrame !== frameIndex) {\n      this.decodeFrame(frameIndex);\n    }\n    const palette = this.getFramePaletteIndices(frameIndex);\n    const layer = this.layers[layerIndex];\n    const image = new Uint8Array(PpmParser.width * PpmParser.height);\n    const layerColor = palette[layerIndex + 1];\n    for (let pixel = 0; pixel < image.length; pixel++) {\n      if (layer[pixel] !== 0) {\n        image[pixel] = layerColor;\n      }\n    }\n    return image;\n  }\n\n  // retuns an uint8 array where each item is a pixel's palette index\n  public getFramePixels(frameIndex: number) {\n    const palette = this.getFramePaletteIndices(frameIndex);\n    const layers = this.decodeFrame(frameIndex);\n    const image = new Uint8Array(PpmParser.width * PpmParser.height);\n    image.fill(palette[0]); // fill with paper color first\n    for (let pixel = 0; pixel < image.length; pixel++) {\n      const a = layers[0][pixel];\n      const b = layers[1][pixel];\n      if (a !== 0)\n        image[pixel] = palette[1];\n      else if (b !== 0)\n        image[pixel] = palette[2];\n    }\n    return image;\n  }\n\n  public decodeAudio(trackId: FlipnoteAudioTrack) {\n    const trackMeta = this.soundMeta[trackId];\n    const adpcm = new Uint8Array(this.buffer, trackMeta.offset, trackMeta.length);\n    const output = new Int16Array(adpcm.length * 2);\n    let outputOffset = 0;\n    // initial decoder state\n    let prevDiff = 0;\n    let prevStepIndex = 0;\n    let sample: number;\n    let diff: number;\n    let stepIndex: number;\n    // loop through each byte in the raw adpcm data\n    for (let adpcmOffset = 0; adpcmOffset < adpcm.length; adpcmOffset++) {\n      const byte = adpcm[adpcmOffset];\n      let bitPos = 0;\n      while (bitPos < 8) {\n        // isolate 4-bit sample\n        sample = (byte >> bitPos) & 0xF;\n        // get diff\n        diff = prevDiff + ADPCM_SAMPLE_TABLE_4[sample + 16 * prevStepIndex];\n        // get step index\n        stepIndex = prevStepIndex + ADPCM_INDEX_TABLE_4[sample];\n        // clamp step index and diff\n        stepIndex = Math.max(0, Math.min(stepIndex, 79));\n        diff = Math.max(-32767, Math.min(diff, 32767));\n        // add result to output buffer\n        output[outputOffset] = diff;\n        outputOffset += 1;\n        // set prev decoder state\n        prevStepIndex = stepIndex;\n        prevDiff = diff;\n        // move to next sample\n        bitPos += 4;\n      }\n    }\n    return output;\n  }\n\n  public decodeSoundFlags() {\n    this.seek(0x06A0 + this.frameDataLength);\n    // per msdn docs - the array map callback is only invoked for array indicies that have assigned values\n    // so when we create an array, we need to fill it with something before we can map over it\n    const arr = new Array(this.frameCount).fill([]);\n    return arr.map(value => {\n      const byte = this.readUint8();\n      return [byte & 0x1, (byte >> 1) & 0x1, (byte >> 2) & 0x1];\n    });\n  }\n}","// Every possible sequence of pixels for each tile line\nexport const KWZ_LINE_TABLE = new Uint16Array(6561 * 8);\nconst pixelValues = [0x0000, 0xFF00, 0x00FF];\nvar offset = 0;\nfor (let a = 0; a < 3; a++)\n  for (let b = 0; b < 3; b++)\n    for (let c = 0; c < 3; c++)\n      for (let d = 0; d < 3; d++)\n        for (let e = 0; e < 3; e++)\n          for (let f = 0; f < 3; f++)\n            for (let g = 0; g < 3; g++)\n              for (let h = 0; h < 3; h++) {\n                KWZ_LINE_TABLE.set([\n                  pixelValues[b], \n                  pixelValues[a], \n                  pixelValues[d], \n                  pixelValues[c], \n                  pixelValues[f], \n                  pixelValues[e], \n                  pixelValues[h], \n                  pixelValues[g]\n                ], offset);\n                offset += 8;\n              }\n\n// Line offsets, but the lines are shifted to the left by one pixel\nexport const KWZ_LINE_TABLE_SHIFT = new Uint16Array(6561 * 8);\nvar offset = 0;\nfor (let a = 0; a < 2187; a += 729)\n  for (let b = 0; b < 729; b += 243)\n    for (let c = 0; c < 243; c += 81)\n      for (let d = 0; d < 81; d += 27)\n        for (let e = 0; e < 27; e += 9)\n          for (let f = 0; f < 9; f += 3)\n            for (let g = 0; g < 3; g += 1)\n              for (let h = 0; h < 6561; h += 2187) {\n                const lineTableIndex = a + b + c + d + e + f + g + h;\n                const pixels = KWZ_LINE_TABLE.subarray(lineTableIndex * 8, lineTableIndex * 8 + 8);\n                KWZ_LINE_TABLE_SHIFT.set(pixels, offset);\n                offset += 8;\n              }\n\n// Commonly occuring line offsets\nexport const KWZ_LINE_TABLE_COMMON = new Uint16Array(32 * 8);\n[\n  0x0000, 0x0CD0, 0x19A0, 0x02D9, 0x088B, 0x0051, 0x00F3, 0x0009,\n  0x001B, 0x0001, 0x0003, 0x05B2, 0x1116, 0x00A2, 0x01E6, 0x0012,\n  0x0036, 0x0002, 0x0006, 0x0B64, 0x08DC, 0x0144, 0x00FC, 0x0024,\n  0x001C, 0x0004, 0x0334, 0x099C, 0x0668, 0x1338, 0x1004, 0x166C\n].forEach((lineTableIndex, index) => {\n  const pixels = KWZ_LINE_TABLE.subarray(lineTableIndex * 8, lineTableIndex * 8 + 8);\n  KWZ_LINE_TABLE_COMMON.set(pixels, index * 8);\n});\n\n// Commonly occuring line offsets, but the lines are shifted to the left by one pixel\nexport const KWZ_LINE_TABLE_COMMON_SHIFT = new Uint16Array(32 * 8);\n[\n  0x0000, 0x0CD0, 0x19A0, 0x0003, 0x02D9, 0x088B, 0x0051, 0x00F3, \n  0x0009, 0x001B, 0x0001, 0x0006, 0x05B2, 0x1116, 0x00A2, 0x01E6, \n  0x0012, 0x0036, 0x0002, 0x02DC, 0x0B64, 0x08DC, 0x0144, 0x00FC, \n  0x0024, 0x001C, 0x099C, 0x0334, 0x1338, 0x0668, 0x166C, 0x1004\n].forEach((lineTableIndex, index) => {\n  const pixels = KWZ_LINE_TABLE.subarray(lineTableIndex * 8, lineTableIndex * 8 + 8);\n  KWZ_LINE_TABLE_COMMON_SHIFT.set(pixels, index * 8);\n});\n\n","import { \n  PaletteDefinition,\n  FlipnoteAudioTrack,\n  FlipnoteParserBase\n} from './parserBase';\n\nimport {\n  ADPCM_INDEX_TABLE_2,\n  ADPCM_INDEX_TABLE_4,\n  ADPCM_SAMPLE_TABLE_2,\n  ADPCM_SAMPLE_TABLE_4\n} from './adpcm';\n\nimport {\n  KWZ_LINE_TABLE,\n  KWZ_LINE_TABLE_SHIFT,\n  KWZ_LINE_TABLE_COMMON,\n  KWZ_LINE_TABLE_COMMON_SHIFT,\n} from './kwzTables';\n\nconst FRAMERATES = [\n  1 / 5,\n  1 / 2,\n  1,\n  2,\n  4, \n  6,\n  8,\n  12, \n  20,\n  24,\n  30\n];\n\nconst PALETTE: PaletteDefinition = {\n  WHITE:  [0xff, 0xff, 0xff],\n  BLACK:  [0x10, 0x10, 0x10],\n  RED:    [0xff, 0x10, 0x10],\n  YELLOW: [0xff, 0xe7, 0x00],\n  GREEN:  [0x00, 0x86, 0x31],\n  BLUE:   [0x00, 0x38, 0xce],\n  NONE:   [0xff, 0xff, 0xff]\n};\n\nexport type KwzSectionMagic = 'KFH' | 'KTN' | 'KMC' | 'KMI' | 'KSN' | 'ICO';\n\nexport type KwzSectionMap = {\n  [k in KwzSectionMagic]?: {\n    offset: number, length: number\n  }\n};\n\nexport interface KwzMeta {\n  lock: boolean;\n  loop: boolean;\n  frame_count: number;\n  frame_speed: number;\n  thumb_index: number;\n  timestamp: Date;\n  creation_timestamp: Date;\n  root: {\n    filename: string;\n    username: string;\n    fsid: string;\n  },\n  parent: {\n    filename: string;\n    username: string;\n    fsid: string;\n  },\n  current: {\n    filename: string;\n    username: string;\n    fsid: string;\n  },\n};\n\nexport interface KwzFrameMeta {\n  flags: number;\n  layerSize: number[];\n  frameAuthor: string;\n  layerDepth: number[];\n  soundFlags: number;\n  cameraFlag: number;\n};\n\nexport class KwzParser extends FlipnoteParserBase {\n\n  static type: string = 'KWZ';\n  static width: number = 320;\n  static height: number = 240;\n  static sampleRate: number = 16364;\n  static globalPalette = [\n    PALETTE.WHITE,\n    PALETTE.BLACK,\n    PALETTE.RED,\n    PALETTE.YELLOW,\n    PALETTE.GREEN,\n    PALETTE.BLUE,\n    PALETTE.NONE,\n  ];\n\n  public type: string = KwzParser.type;\n  public width: number = KwzParser.width;\n  public height: number = KwzParser.height;\n  public globalPalette = KwzParser.globalPalette;\n  public sampleRate = KwzParser.sampleRate;\n  public meta: KwzMeta;\n\n  private sections: KwzSectionMap;\n  private layers: Uint16Array[];\n  private prevDecodedFrame: number = null;\n  private frameMeta: KwzFrameMeta[];\n  private frameOffsets: Uint32Array;\n  private bitIndex: number = 0;\n  private bitValue: number = 0;\n\n  constructor(arrayBuffer: ArrayBuffer) {\n    super(arrayBuffer);\n    this.layers = [\n      new Uint16Array(KwzParser.width * KwzParser.height),\n      new Uint16Array(KwzParser.width * KwzParser.height),\n      new Uint16Array(KwzParser.width * KwzParser.height),\n    ];\n    this.bitIndex = 0;\n    this.bitValue = 0;\n    this.load();\n  }\n\n  load() {\n    this.seek(0);\n    this.sections = {};\n    this.frameMeta = [];\n    const fileSize = this.byteLength - 256;\n    let offset = 0;\n    let sectionCount = 0;\n    // counting sections should mitigate against one of mrnbayoh's notehax exploits\n    while ((offset < fileSize) && (sectionCount < 6)) {\n      this.seek(offset);\n      const sectionMagic = <KwzSectionMagic>this.readUtf8(4).substring(0, 3);\n      const sectionLength = this.readUint32();\n      this.sections[sectionMagic] = {\n        offset: offset,\n        length: sectionLength\n      };\n      offset += sectionLength + 8;\n      sectionCount += 1;\n    }\n\n    this.decodeMeta();\n    this.decodeFrameMeta();\n    this.decodeSoundHeader();\n  }\n\n  private readBits(num: number) {\n    if (this.bitIndex + num > 16) {\n      const nextBits = this.readUint16();\n      this.bitValue |= nextBits << (16 - this.bitIndex);\n      this.bitIndex -= 16;\n    }\n    const mask = (1 << num) - 1;\n    const result = this.bitValue & mask;\n    this.bitValue >>= num;\n    this.bitIndex += num;\n    return result;\n  }\n\n  private decodeMeta() {\n    this.seek(this.sections['KFH'].offset + 12);\n    const creationTimestamp = new Date((this.readUint32() + 946684800) * 1000),\n          modifiedTimestamp = new Date((this.readUint32() + 946684800) * 1000),\n          appVersion = this.readUint32(),\n          rootAuthorId = this.readHex(10),\n          parentAuthorId = this.readHex(10),\n          currentAuthorId = this.readHex(10),\n          rootAuthorName = this.readUtf16(11),\n          parentAuthorName = this.readUtf16(11),\n          currentAuthorName = this.readUtf16(11),\n          rootFilename = this.readUtf8(28),\n          parentFilename = this.readUtf8(28),\n          currentFilename = this.readUtf8(28),\n          frameCount = this.readUint16(),\n          thumbIndex = this.readUint16(),\n          flags = this.readUint16(),\n          frameSpeed = this.readUint8(),\n          layerFlags = this.readUint8();\n    this.frameCount = frameCount;\n    this.thumbFrameIndex = thumbIndex;\n    this.frameSpeed = frameSpeed;\n    this.framerate = FRAMERATES[frameSpeed];\n    this.meta = {\n      lock: (flags & 0x1) === 1,\n      loop: ((flags >> 1) & 0x01) === 1,\n      frame_count: frameCount,\n      frame_speed: frameSpeed,\n      thumb_index: thumbIndex,\n      timestamp: modifiedTimestamp,\n      creation_timestamp: creationTimestamp,\n      root: {\n        username: rootAuthorName,\n        fsid: rootAuthorId,\n        filename: rootFilename,\n      },\n      parent: {\n        username: parentAuthorName,\n        fsid: parentAuthorId,\n        filename: parentFilename,\n      },\n      current: {\n        username: currentAuthorName,\n        fsid: currentAuthorId,\n        filename: currentFilename,\n      },\n    };\n  }\n\n  private decodeFrameMeta() {\n    this.frameOffsets = new Uint32Array(this.frameCount);\n    this.seek(this.sections['KMI'].offset + 8);\n    let offset = this.sections['KMC'].offset + 12;\n    for (let i = 0; i < this.frameCount; i++) {\n      const frame = {\n        flags: this.readUint32(),\n        layerSize: [\n          this.readUint16(),\n          this.readUint16(),\n          this.readUint16()\n        ],\n        frameAuthor: this.readHex(10),\n        layerDepth: [\n          this.readUint8(),\n          this.readUint8(),\n          this.readUint8(),\n        ],\n        soundFlags: this.readUint8(),\n        cameraFlag: this.readUint32(),\n      };\n      this.frameMeta.push(frame);\n      this.frameOffsets[i] = offset;\n      offset += frame.layerSize[0] + frame.layerSize[1] + frame.layerSize[2];\n    }\n  }\n\n  private decodeSoundHeader() {\n    if (this.sections.hasOwnProperty('KSN')) {\n      let offset = this.sections['KSN'].offset + 8;\n      this.seek(offset);\n      const bgmSpeed = this.readUint32();\n      this.bgmSpeed = bgmSpeed;\n      this.bgmrate = FRAMERATES[bgmSpeed];\n      const trackSizes = new Uint32Array(this.buffer, offset + 4, 20);\n      this.soundMeta = {\n        [FlipnoteAudioTrack.BGM]: {offset: offset += 28,            length: trackSizes[0]},\n        [FlipnoteAudioTrack.SE1]: {offset: offset += trackSizes[0], length: trackSizes[1]},\n        [FlipnoteAudioTrack.SE2]: {offset: offset += trackSizes[1], length: trackSizes[2]},\n        [FlipnoteAudioTrack.SE3]: {offset: offset += trackSizes[2], length: trackSizes[3]},\n        [FlipnoteAudioTrack.SE4]: {offset: offset += trackSizes[3], length: trackSizes[4]},\n      };\n    }\n  }\n\n  private getDiffingFlag(frameIndex: number) {\n    return ~(this.frameMeta[frameIndex].flags >> 4) & 0x07;\n  }\n\n  public getLayerDepths(frameIndex: number) {\n    return this.frameMeta[frameIndex].layerDepth;\n  }\n\n  // sort layer indices sorted by depth, from bottom to top\n  public getLayerOrder(frameIndex: number) {\n    const depths = this.getLayerDepths(frameIndex);\n    return [2, 1, 0].sort((a, b) => depths[b] - depths[a]);\n  }\n\n  public decodeFrame(frameIndex: number, diffingFlag: number=0x7, isPrevFrame: boolean=false) {\n    // if this frame is being decoded as a prev frame, then we only want to decode the layers necessary\n    if (isPrevFrame)\n      diffingFlag &= this.getDiffingFlag(frameIndex + 1);\n    // the prevDecodedFrame check is an optimisation for decoding frames in full sequence\n    if ((frameIndex !== 0) && (this.prevDecodedFrame !== frameIndex - 1) && (diffingFlag))\n      this.decodeFrame(frameIndex - 1, diffingFlag=diffingFlag, isPrevFrame=true);\n\n    const meta = this.frameMeta[frameIndex];\n    let offset = this.frameOffsets[frameIndex];\n\n    for (let layerIndex = 0; layerIndex < 3; layerIndex++) {\n      this.seek(offset);\n      const layerSize = meta.layerSize[layerIndex];\n      offset += layerSize;\n\n      // if the layer is 38 bytes then it hasn't changed at all since the previous frame, so we can skip it\n      if (layerSize === 38) continue;\n\n      if (((diffingFlag >> layerIndex) & 0x1) === 0) continue;\n\n      this.bitIndex = 16;\n      this.bitValue = 0;\n      let skip = 0;\n\n      for (let tileOffsetY = 0; tileOffsetY < KwzParser.height; tileOffsetY += 128) {\n        for (let tileOffsetX = 0; tileOffsetX < KwzParser.width; tileOffsetX += 128) {\n          for (let subTileOffsetY = 0; subTileOffsetY < 128; subTileOffsetY += 8) {\n            const y = tileOffsetY + subTileOffsetY;\n            if (y >= KwzParser.height) break;\n\n            for (let subTileOffsetX = 0; subTileOffsetX < 128; subTileOffsetX += 8) {\n              const x = tileOffsetX + subTileOffsetX;\n              if (x >= KwzParser.width) break;\n\n              if (skip) {\n                skip -= 1;\n                continue;\n              }\n\n              const pixelOffset = y * KwzParser.width + x;\n              const pixelBuffer = this.layers[layerIndex];\n\n              const type = this.readBits(3);\n\n              if (type == 0) {\n                const lineIndex = this.readBits(5);\n                const pixels = KWZ_LINE_TABLE_COMMON.subarray(lineIndex * 8, lineIndex * 8 + 8);\n                pixelBuffer.set(pixels, pixelOffset);\n                pixelBuffer.set(pixels, pixelOffset + 320);\n                pixelBuffer.set(pixels, pixelOffset + 640);\n                pixelBuffer.set(pixels, pixelOffset + 960);\n                pixelBuffer.set(pixels, pixelOffset + 1280);\n                pixelBuffer.set(pixels, pixelOffset + 1600);\n                pixelBuffer.set(pixels, pixelOffset + 1920);\n                pixelBuffer.set(pixels, pixelOffset + 2240);\n              } \n\n              else if (type == 1) {\n                const lineIndex = this.readBits(13);\n                const pixels = KWZ_LINE_TABLE.subarray(lineIndex * 8, lineIndex * 8 + 8);\n                pixelBuffer.set(pixels, pixelOffset);\n                pixelBuffer.set(pixels, pixelOffset + 320);\n                pixelBuffer.set(pixels, pixelOffset + 640);\n                pixelBuffer.set(pixels, pixelOffset + 960);\n                pixelBuffer.set(pixels, pixelOffset + 1280);\n                pixelBuffer.set(pixels, pixelOffset + 1600);\n                pixelBuffer.set(pixels, pixelOffset + 1920);\n                pixelBuffer.set(pixels, pixelOffset + 2240);\n              } \n              \n              else if (type == 2) {\n                const lineValue = this.readBits(5);\n                const a = KWZ_LINE_TABLE_COMMON.subarray(lineValue * 8, lineValue * 8 + 8);\n                const b = KWZ_LINE_TABLE_COMMON_SHIFT.subarray(lineValue * 8, lineValue * 8 + 8);\n                pixelBuffer.set(a, pixelOffset);\n                pixelBuffer.set(b, pixelOffset + 320);\n                pixelBuffer.set(a, pixelOffset + 640);\n                pixelBuffer.set(b, pixelOffset + 960);\n                pixelBuffer.set(a, pixelOffset + 1280);\n                pixelBuffer.set(b, pixelOffset + 1600);\n                pixelBuffer.set(a, pixelOffset + 1920);\n                pixelBuffer.set(b, pixelOffset + 2240);\n              } \n              \n              else if (type == 3) {\n                const lineValue = this.readBits(13);\n                const a = KWZ_LINE_TABLE.subarray(lineValue * 8, lineValue * 8 + 8);\n                const b = KWZ_LINE_TABLE_SHIFT.subarray(lineValue * 8, lineValue * 8 + 8);\n                pixelBuffer.set(a, pixelOffset);\n                pixelBuffer.set(b, pixelOffset + 320);\n                pixelBuffer.set(a, pixelOffset + 640);\n                pixelBuffer.set(b, pixelOffset + 960);\n                pixelBuffer.set(a, pixelOffset + 1280);\n                pixelBuffer.set(b, pixelOffset + 1600);\n                pixelBuffer.set(a, pixelOffset + 1920);\n                pixelBuffer.set(b, pixelOffset + 2240);\n              }\n\n              // most common tile type\n              else if (type == 4) {\n                const mask = this.readBits(8);\n                for (let line = 0; line < 8; line++) {\n                  if (mask & (1 << line)) {\n                    const lineIndex = this.readBits(5);\n                    const pixels = KWZ_LINE_TABLE_COMMON.subarray(lineIndex * 8, lineIndex * 8 + 8);\n                    pixelBuffer.set(pixels, pixelOffset + line * 320);\n                  } else {\n                    const lineIndex = this.readBits(13);\n                    const pixels = KWZ_LINE_TABLE.subarray(lineIndex * 8, lineIndex * 8 + 8);\n                    pixelBuffer.set(pixels, pixelOffset + line * 320);\n                  }\n                }\n              }\n\n              else if (type == 5) {\n                skip = this.readBits(5);\n                continue;\n              }\n\n              // type 6 doesnt exist\n\n              else if (type == 7) {\n                let pattern = this.readBits(2);\n                let useCommonLines = this.readBits(1);\n\n                let a;\n                let b;\n\n                if (useCommonLines) {\n                  const lineIndexA = this.readBits(5);\n                  const lineIndexB = this.readBits(5);\n                  a = KWZ_LINE_TABLE_COMMON.subarray(lineIndexA * 8, lineIndexA * 8 + 8);\n                  b = KWZ_LINE_TABLE_COMMON.subarray(lineIndexB * 8, lineIndexB * 8 + 8);\n                  pattern = (pattern + 1) % 4;\n                } else {\n                  const lineIndexA = this.readBits(13);\n                  const lineIndexB = this.readBits(13);\n                  a = KWZ_LINE_TABLE.subarray(lineIndexA * 8, lineIndexA * 8 + 8);\n                  b = KWZ_LINE_TABLE.subarray(lineIndexB * 8, lineIndexB * 8 + 8);\n                }\n\n                if (pattern == 0) {\n                  pixelBuffer.set(a, pixelOffset);\n                  pixelBuffer.set(b, pixelOffset + 320);\n                  pixelBuffer.set(a, pixelOffset + 640);\n                  pixelBuffer.set(b, pixelOffset + 960);\n                  pixelBuffer.set(a, pixelOffset + 1280);\n                  pixelBuffer.set(b, pixelOffset + 1600);\n                  pixelBuffer.set(a, pixelOffset + 1920);\n                  pixelBuffer.set(b, pixelOffset + 2240);\n                } else if (pattern == 1) {\n                  pixelBuffer.set(a, pixelOffset);\n                  pixelBuffer.set(a, pixelOffset + 320);\n                  pixelBuffer.set(b, pixelOffset + 640);\n                  pixelBuffer.set(a, pixelOffset + 960);\n                  pixelBuffer.set(a, pixelOffset + 1280);\n                  pixelBuffer.set(b, pixelOffset + 1600);\n                  pixelBuffer.set(a, pixelOffset + 1920);\n                  pixelBuffer.set(a, pixelOffset + 2240);\n                } else if (pattern == 2) {\n                  pixelBuffer.set(a, pixelOffset);\n                  pixelBuffer.set(b, pixelOffset + 320);\n                  pixelBuffer.set(a, pixelOffset + 640);\n                  pixelBuffer.set(a, pixelOffset + 960);\n                  pixelBuffer.set(b, pixelOffset + 1280);\n                  pixelBuffer.set(a, pixelOffset + 1600);\n                  pixelBuffer.set(a, pixelOffset + 1920);\n                  pixelBuffer.set(b, pixelOffset + 2240);\n                } else if (pattern == 3) {\n                  pixelBuffer.set(a, pixelOffset);\n                  pixelBuffer.set(b, pixelOffset + 320);\n                  pixelBuffer.set(b, pixelOffset + 640);\n                  pixelBuffer.set(a, pixelOffset + 960);\n                  pixelBuffer.set(b, pixelOffset + 1280);\n                  pixelBuffer.set(b, pixelOffset + 1600);\n                  pixelBuffer.set(a, pixelOffset + 1920);\n                  pixelBuffer.set(b, pixelOffset + 2240);\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    this.prevDecodedFrame = frameIndex;\n    // return this._layers;\n    return [\n      new Uint8Array(this.layers[0].buffer),\n      new Uint8Array(this.layers[1].buffer),\n      new Uint8Array(this.layers[2].buffer),\n    ];\n  }\n\n  public getFramePaletteIndices(frameIndex: number) {\n    const { flags } = this.frameMeta[frameIndex];\n    return [\n      flags & 0xF, // paper color\n      (flags >> 8) & 0xF, // layer A color 1\n      (flags >> 12) & 0xF, // layer A color 2\n      (flags >> 16) & 0xF, // layer B color 1\n      (flags >> 20) & 0xF, // layer B color 2\n      (flags >> 24) & 0xF, // layer C color 1\n      (flags >> 28) & 0xF, // layer C color 2\n    ];\n  }\n\n  public getFramePalette(frameIndex: number) {\n    const indices = this.getFramePaletteIndices(frameIndex);\n    return indices.map(colorIndex => this.globalPalette[colorIndex]);\n  }\n\n  // retuns an uint8 array where each item is a pixel's palette index\n  public getLayerPixels(frameIndex: number, layerIndex: number) {\n    if (this.prevDecodedFrame !== frameIndex) {\n      this.decodeFrame(frameIndex);\n    }\n    const palette = this.getFramePaletteIndices(frameIndex);\n    const layers = this.layers[layerIndex];\n    const image = new Uint8Array((KwzParser.width * KwzParser.height));\n    const paletteOffset = layerIndex * 2 + 1;\n    for (let pixelIndex = 0; pixelIndex < layers.length; pixelIndex++) {\n      let pixel = layers[pixelIndex];\n      if (pixel & 0xff00) {\n        image[pixelIndex] = palette[paletteOffset];\n      } else if (pixel & 0x00ff) {\n        image[pixelIndex] = palette[paletteOffset + 1];\n      }\n    }\n    return image;\n  }\n\n  // retuns an uint8 array where each item is a pixel's palette index\n  public getFramePixels(frameIndex: number) {\n    const palette = this.getFramePaletteIndices(frameIndex);\n    const image = new Uint8Array((KwzParser.width * KwzParser.height));\n    image.fill(palette[0]); // fill with paper color first\n    const layerOrder = this.getLayerOrder(frameIndex);\n    layerOrder.forEach(layerIndex => {\n      const layer = this.getLayerPixels(frameIndex, layerIndex);\n      // merge layer into image result\n      for (let pixelIndex = 0; pixelIndex < layer.length; pixelIndex++) {\n        const pixel = layer[pixelIndex];\n        if (pixel !== 0) {\n          image[pixelIndex] = pixel;\n        }\n      }\n    });\n    return image;\n  }\n  \n  public decodeSoundFlags() {\n    return this.frameMeta.map(frame => {\n      const soundFlags = frame.soundFlags;\n      return [\n        soundFlags & 0x1,\n        (soundFlags >> 1) & 0x1,\n        (soundFlags >> 2) & 0x1,\n        (soundFlags >> 3) & 0x1,\n      ];\n    });\n  }\n\n  public decodeAudio(trackId: FlipnoteAudioTrack) {\n    const trackMeta = this.soundMeta[trackId];\n    const adpcm = new Uint8Array(this.buffer, trackMeta.offset, trackMeta.length);\n    const output = new Int16Array(16364 * 60);\n    let outputOffset = 0;\n    // initial decoder state\n    let prevDiff = 0;\n    let prevStepIndex = 40;\n    let sample: number;\n    let diff: number;\n    let stepIndex: number;\n    // loop through each byte in the raw adpcm data\n    for (let adpcmOffset = 0; adpcmOffset < adpcm.length; adpcmOffset++) {\n      const byte = adpcm[adpcmOffset];\n      let bitPos = 0;\n      while (bitPos < 8) {\n        if (prevStepIndex < 18 || bitPos == 6) {\n          // isolate 2-bit sample\n          sample = (byte >> bitPos) & 0x3;\n          // get diff\n          diff = prevDiff + ADPCM_SAMPLE_TABLE_2[sample + 4 * prevStepIndex];\n          // get step index\n          stepIndex = prevStepIndex + ADPCM_INDEX_TABLE_2[sample];\n          bitPos += 2;\n        }\n        else {\n          // isolate 4-bit sample\n          sample = (byte >> bitPos) & 0xF;\n          // get diff\n          diff = prevDiff + ADPCM_SAMPLE_TABLE_4[sample + 16 * prevStepIndex];\n          // get step index\n          stepIndex = prevStepIndex + ADPCM_INDEX_TABLE_4[sample];\n          bitPos += 4;\n        }\n        // clamp step index and diff\n        stepIndex = Math.max(0, Math.min(stepIndex, 79));\n        diff = Math.max(-2047, Math.min(diff, 2047));\n        // add result to output buffer\n        output[outputOffset] = (diff * 16);\n        outputOffset += 1;\n        // set prev decoder state\n        prevStepIndex = stepIndex;\n        prevDiff = diff;\n      }\n\n    }\n    return output.slice(0, outputOffset);\n  }\n}","import { loadSource } from '../loaders/index';\nimport { FlipnoteParserBase } from './parserBase';\nimport { PpmParser, PpmMeta } from './ppm';\nimport { KwzParser, KwzMeta } from './kwz';\n\nexport * from './ppm';\nexport * from './kwz';\nexport * from './parserBase';\n\nexport type Flipnote = FlipnoteParserBase;\n\nexport type FlipnoteMeta = PpmMeta | KwzMeta; \n\nexport function parseSource(source: any): Promise<Flipnote> {\n  return loadSource(source)\n    .then((arrayBuffer: ArrayBuffer) => {\n      return new Promise((resolve, reject) => {\n        // check the buffer's magic to identify which format it uses\n        const magicBytes = new Uint8Array(arrayBuffer.slice(0, 4));\n        const magic = (magicBytes[0] << 24) | (magicBytes[1] << 16) | (magicBytes[2] << 8) | magicBytes[3];\n        if (magic === 0x50415241) { // check if magic is PARA (ppm magic)\n          resolve(new PpmParser(arrayBuffer));\n        } else if ((magic & 0xFFFFFF00) === 0x4B464800) { // check if magic is KFH (kwz magic)\n          resolve(new KwzParser(arrayBuffer));\n        } else {\n          reject();\n        }\n      });\n    });\n}","import { DataStream } from '../utils/index';\n\nexport class WavEncoder {\n\n  public sampleRate: number;\n  public channels: number;\n  public bitsPerSample: number;\n\n  private header: DataStream;\n  private pcmData: Int16Array;\n\n  constructor(sampleRate: number, channels=1, bitsPerSample=16) {\n    this.sampleRate = sampleRate;\n    this.channels = channels;\n    this.bitsPerSample = bitsPerSample;\n    // Write WAV file header\n    // Reference: http://www.topherlee.com/software/pcm-tut-wavformat.html\n    let headerBuffer = new ArrayBuffer(44);\n    let header = new DataStream(headerBuffer);\n    // 'RIFF' indent\n    header.writeUtf8('RIFF');\n    // filesize (set later)\n    header.writeUint32(0);\n    // 'WAVE' indent\n    header.writeUtf8('WAVE');\n    // 'fmt ' section header\n    header.writeUtf8('fmt ');\n    // fmt section length\n    header.writeUint32(16);\n    // specify audio format is pcm (type 1)\n    header.writeUint16(1);\n    // number of audio channels\n    header.writeUint16(this.channels);\n    // audio sample rate\n    header.writeUint32(this.sampleRate);\n    // byterate = (sampleRate * bitsPerSample * channelCount) / 8\n    header.writeUint32((this.sampleRate * this.bitsPerSample * this.channels) / 8);\n    // blockalign = (bitsPerSample * channels) / 8\n    header.writeUint16((this.bitsPerSample * this.channels) / 8);\n    // bits per sample\n    header.writeUint16(this.bitsPerSample);\n    // 'data' section header\n    header.writeUtf8('data');\n    // data section length (set later)\n    header.writeUint32(0);\n    this.header = header;\n    this.pcmData = null;\n  }\n\n  public writeFrames(pcmData: Int16Array) {\n    let header = this.header;\n    // fill in filesize\n    header.seek(4);\n    header.writeUint32(header.byteLength + pcmData.byteLength);\n    // fill in data section length\n    header.seek(40);\n    header.writeUint32(pcmData.byteLength);\n    this.pcmData = pcmData;\n  }\n\n  public getBlob() {\n    return new Blob([this.header.buffer, this.pcmData.buffer], {type: 'audio/wav'});\n  }\n}","import { WavEncoder } from '../encoders/wav';\n\nexport class AudioTrack {\n\n  public id: string;\n  public audio: HTMLAudioElement;\n  public playbackRate: number = 1;\n  public sampleRate: number;\n  public length: number;\n  public isActive: boolean;\n\n  private channelCount: number;\n  private bitsPerSample: number;\n  private url: string;\n\n  constructor (id: string) {\n    this.id = id;\n    this.channelCount = 1;\n    this.bitsPerSample = 16;\n    this.sampleRate = 0;\n    this.audio = document.createElement('audio');\n    this.audio.preload = 'auto';\n    this.isActive = false;\n  }\n\n  public set(pcmData: Int16Array, playbackRate: number): void {\n    // the HTML5 audio element supports PCM audio if it's in a WAV wrapper\n    const wav = new WavEncoder(this.sampleRate * playbackRate, this.channelCount, this.bitsPerSample);\n    wav.writeFrames(pcmData);\n    this.url = window.URL.createObjectURL(wav.getBlob());\n    // use the blob url for the audio element\n    this.audio.src = this.url;\n    this.isActive = true;\n    this.playbackRate = playbackRate;\n    this.length = pcmData.length;\n  }\n\n  get duration() {\n    return this.audio.duration;\n  }\n\n  public unset(): void {\n    if (this.isActive) {\n      window.URL.revokeObjectURL(this.url);\n      this.audio.src = '';\n      this.audio.load();\n      this.isActive = false;\n      this.playbackRate = 1;\n      this.length = null;\n    }\n  }\n\n  public start(offset = 0): void {\n    if (this.isActive) {\n      this.audio.currentTime = offset;\n      this.audio.play();\n    }\n  }\n\n  public stop(): void {\n    if (this.isActive) {\n      this.audio.pause();\n    }\n  }\n}","\nimport vertexShader from './shader.vert';\nimport fragmentShader from './shader.frag';\n\ninterface UniformMap {\n  [key : string]: WebGLUniformLocation;\n};\n\ninterface ResourceMap {\n  shaders: WebGLShader[],\n  textures: WebGLTexture[],\n  buffers: WebGLBuffer[]\n}\n\nexport enum TextureType {\n  Alpha = WebGLRenderingContext.ALPHA,\n  LuminanceAlpha = WebGLRenderingContext.LUMINANCE_ALPHA,\n};\n\n/** webgl canvas wrapper class */\nexport class WebglCanvas {\n\n  public width: number;\n  public height: number;\n  public el: HTMLCanvasElement;\n  public gl: WebGLRenderingContext;\n\n  private program: WebGLProgram;\n  private textureType: TextureType;\n  private uniforms: UniformMap = {};\n  private refs: ResourceMap = {\n    shaders: [],\n    textures: [],\n    buffers: []\n  };\n\n  constructor(el: HTMLCanvasElement, width=640, height=480, params={antialias: false, alpha: false}) {\n    const gl = <WebGLRenderingContext>el.getContext('webgl', params);\n    this.el = el;\n    this.gl = gl;\n    this.createProgram();\n    this.setCanvasSize(width, height);\n    this.createScreenQuad();\n    this.createBitmapTexture();\n    gl.enable(gl.BLEND);\n    gl.blendEquation(gl.FUNC_ADD);\n    gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n  }\n\n  private createProgram() {\n    const gl = this.gl;\n    const program = gl.createProgram();\n    // set up shaders\n    gl.attachShader(program, this.createShader(gl.VERTEX_SHADER, vertexShader));\n    gl.attachShader(program, this.createShader(gl.FRAGMENT_SHADER, fragmentShader));\n    // link program\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      let log = gl.getProgramInfoLog(program);\n      gl.deleteProgram(program);\n      throw new Error(log);\n    }\n    // activate the program\n    gl.useProgram(program);\n    // map uniform locations\n    const uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n    for (let index = 0; index < uniformCount; index++) {\n      const name = gl.getActiveUniform(program, index).name;\n      this.uniforms[name] = gl.getUniformLocation(program, name);\n    }\n    this.program = program;\n  }\n\n  private createScreenQuad() {\n    const gl = this.gl;\n    // create quad that fills the screen, this will be our drawing surface\n    const vertBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1,  1, -1, 1, -1, -1, 1, 1, -1, -1, 1, -1]), gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(0);\n    gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\n    this.refs.buffers.push(vertBuffer);\n  }\n\n  private createBitmapTexture() {\n    const gl = this.gl;\n    // create texture to use as the layer bitmap\n    gl.activeTexture(gl.TEXTURE0);\n    const tex = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, tex);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.uniform1i(this.uniforms['u_bitmap'], 0);\n    this.refs.textures.push(tex);\n  }\n\n  private createShader(type: number, source: string) {\n    const gl = this.gl;\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    // test if shader compilation was successful\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      const log = gl.getShaderInfoLog(shader);\n      gl.deleteShader(shader);\n      throw new Error(log);\n    }\n    this.refs.shaders.push(shader);\n    return shader;\n  }\n\n  public setInputSize(width: number, height: number) {\n    this.gl.uniform2f(this.uniforms['u_textureSize'], width, height);\n  }\n\n  public setCanvasSize(width: number, height: number) {\n    const dpi = window.devicePixelRatio || 1;\n    const internalWidth = width * dpi;\n    const internalHeight = height * dpi;\n    this.el.width = internalWidth;\n    this.el.height = internalHeight;\n    this.width = internalWidth;\n    this.height = internalHeight;\n    this.gl.viewport(0, 0, internalWidth, internalHeight);\n    this.gl.uniform2f(this.uniforms['u_screenSize'], internalWidth, internalHeight);\n    this.el.style.width = `${ width }px`;\n    this.el.style.height = `${ height }px`;\n  }\n  \n  public setLayerType(textureType: TextureType) {\n    this.textureType = textureType;\n  }\n\n  public toImage(type?: string) {\n    return this.el.toDataURL(type);\n  }\n\n  public setColor(color: string, value: number[]) {\n    this.gl.uniform4f(this.uniforms[color], value[0]/255, value[1]/255, value[2]/255, 1);\n  }\n\n  public setPaperColor(value: number[]) {\n    this.gl.clearColor(value[0] / 255, value[1] / 255, value[2] / 255, 1);\n  }\n\n  public drawLayer(buffer: Uint8Array, width: number, height: number, color1: number[], color2: number[]) {\n    const gl = this.gl;\n    // gl.activeTexture(gl.TEXTURE0);\n    gl.texImage2D(gl.TEXTURE_2D, 0, this.textureType, width, height, 0, this.textureType, gl.UNSIGNED_BYTE, buffer);\n    this.setColor('u_color1', color1);\n    this.setColor('u_color2', color2);\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n  }\n\n  public resize(width=640, height=480) {\n    this.setCanvasSize(width, height);\n  }\n\n  public clear() {\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n  }\n\n  public destroy() {\n    // free resources\n    const refs = this.refs;\n    const gl = this.gl;\n    refs.shaders.forEach((shader) => {\n      gl.deleteShader(shader);\n    });\n    refs.shaders = [];\n    refs.textures.forEach((texture) => {\n      gl.deleteTexture(texture);\n    });\n    refs.textures = [];\n    refs.buffers.forEach((buffer) => {\n      gl.deleteBuffer(buffer);\n    });\n    refs.buffers = [];\n    gl.deleteProgram(this.program);\n    // shrink the canvas to reduce memory usage until it is garbage collected\n    gl.canvas.width = 1;\n    gl.canvas.height = 1;\n  }\n}","import { parseSource, Flipnote, FlipnoteMeta, FlipnoteAudioTrack } from '../parsers/index';\nimport { AudioTrack } from './audio';\nimport { WebglCanvas, TextureType } from '../webgl/index';\n\ninterface PlayerEvents {\n  [key: string]: Function[]\n}\n\ninterface PlayerLayerVisibility {\n  [key: number]: boolean;\n}\n\n/** flipnote player API, based on HTMLMediaElement (https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement) */ \nexport class Player {\n\n  public canvas: WebglCanvas;\n  public el: HTMLCanvasElement;\n  public type: string;\n  public note: Flipnote;\n  public meta: FlipnoteMeta;\n  public loop: boolean = false;\n  public paused: boolean = true;\n  public duration: number = 0;\n  public layerVisibility: PlayerLayerVisibility;\n  \n  private isOpen: boolean = false;\n  private customPalette: {};\n  private events: PlayerEvents = {};\n  private audioTracks: AudioTrack[];\n  private seFlags: number[][];\n  private _frame: number = -1;\n  private _time: number = 0;\n  private hasPlaybackStarted: boolean = false;\n  private wasPlaying: boolean = false;\n  private isSeeking: boolean = false;\n\n  constructor(el: string | HTMLCanvasElement, width: number, height: number) {\n    // if `el` is a string, use it to select an Element, else assume it's an element\n    el = ('string' == typeof el) ? <HTMLCanvasElement>document.querySelector(el) : el;\n    this.canvas = new WebglCanvas(el, width, height);\n    this.el = this.canvas.el;\n    this.customPalette = null;\n    this.audioTracks = [\n      new AudioTrack('se1'),\n      new AudioTrack('se2'),\n      new AudioTrack('se3'),\n      new AudioTrack('se4'),\n      new AudioTrack('bgm'),\n    ];\n  }\n\n  get currentFrame() {\n    return this._frame;\n  }\n\n  set currentFrame(frameIndex) {\n    this.setFrame(frameIndex);\n  }\n\n  get currentTime() {\n    return this.isOpen ? this._time : null;\n  }\n\n  set currentTime(value) {\n    if ((this.isOpen) && (value <= this.duration) && (value >= 0)) {\n      this.setFrame(Math.round(value / (1 / this.framerate)));\n      this._time = value;\n      this.emit('progress', this.progress);\n    }\n  }\n\n  get progress() {\n    return this.isOpen ? (this.currentTime / this.duration) * 100 : 0;\n  }\n\n  set progress(value) {\n    this.currentTime = this.duration * (value / 100);\n  }\n\n  get volume() {\n    return this.audioTracks[3].audio.volume;\n  }\n\n  set volume(value) {\n    for (let i = 0; i < this.audioTracks.length; i++) {\n      this.audioTracks[i].audio.volume = value;\n    }\n  }\n\n  get muted() {\n    return this.audioTracks[3].audio.muted;\n  }\n\n  set muted(value) {\n    for (let i = 0; i < this.audioTracks.length; i++) {\n      this.audioTracks[i].audio.muted = value;\n    }\n  }\n\n  get framerate() {\n    return this.note.framerate;\n  }\n\n  get frameCount() {\n    return this.note.frameCount;\n  }\n\n  get frameSpeed() {\n    return this.note.frameSpeed;\n  }\n\n  get audiorate() {\n    return (1 / this.note.bgmrate) / (1 / this.note.framerate);\n  }\n\n  public async open(source: any) {\n    if (this.isOpen) this.close();\n    return parseSource(source)\n      .then((note: Flipnote) => {\n        this.load(note);\n      })\n      .catch((err: any) => {\n        this.emit('error', err);\n        console.error('Error loading Flipnote:', err);\n        throw 'Error loading Flipnote';\n      });\n  }\n\n  public close(): void {\n    this.pause();\n    this.note = null;\n    this.isOpen = false;\n    this.paused = true;\n    this.loop = null;\n    this.meta = null;\n    this._frame = null;\n    this._time = null;\n    this.duration = null;\n    this.loop = null;\n    for (let i = 0; i < this.audioTracks.length; i++) {\n      this.audioTracks[i].unset();\n    }\n    this.seFlags = null;\n    this.hasPlaybackStarted = null;\n    this.canvas.clear();\n  }\n\n  public load(note: Flipnote): void {\n    this.note = note;\n    this.meta = note.meta;\n    this.type = note.type;\n    this.loop = note.meta.loop;\n    this.duration = (this.note.frameCount) * (1 / this.note.framerate);\n    this.paused = true;\n    this.isOpen = true;\n    this.audioTracks.forEach(track => {\n      track.sampleRate = note.sampleRate;\n    });\n    // if (this.customPalette) {\n    //   this.setPalette(this.customPalette);\n    // }\n    const tracks = [FlipnoteAudioTrack.SE1, FlipnoteAudioTrack.SE2, FlipnoteAudioTrack.SE3, FlipnoteAudioTrack.SE4, FlipnoteAudioTrack.BGM];\n    tracks.forEach((trackId, trackIndex) => {\n      const trackRate = trackId === FlipnoteAudioTrack.BGM ? this.audiorate : 1;\n      if (this.note.hasAudioTrack(trackId))\n        this.audioTracks[trackIndex].set(this.note.decodeAudio(trackId), trackRate);\n    })\n    this.seFlags = this.note.decodeSoundFlags();\n    this.hasPlaybackStarted = false;\n    this.layerVisibility = {\n      1: true,\n      2: true,\n      3: true\n    };\n    this.canvas.setInputSize(note.width, note.height);\n    this.canvas.setLayerType(this.type === 'PPM' ? TextureType.Alpha : TextureType.LuminanceAlpha);\n    this.setFrame(this.note.thumbFrameIndex);\n    this._time = 0;\n    this.emit('load');\n  }\n\n  public play(): void {\n    if ((!this.isOpen) || (!this.paused)) return null;\n\n    if ((!this.hasPlaybackStarted) || ((!this.loop) && (this.currentFrame == this.frameCount - 1))) {\n      this._time = 0;\n    }\n\n    this.paused = false;\n    this.playBgm();\n\n    let start = (performance.now() / 1000) - this.currentTime;\n\n    const loop = (timestamp: DOMHighResTimeStamp): void => {\n      if (this.paused) { // break loop if paused is set to true\n        this.stopAudio();\n        return null;\n      }\n      const time = timestamp / 1000;\n      const progress = time - start;\n      if (progress > this.duration) {\n        if (this.loop) {\n          this.currentTime = 0;\n          this.playBgm();\n          start = time;\n          this.emit('playback:loop');\n        } else {\n          this.pause();\n          this.emit('playback:end');\n        }\n      } else {\n        this.currentTime = progress;\n      }\n      requestAnimationFrame(loop);\n    }\n    requestAnimationFrame(loop);\n    this.hasPlaybackStarted = true;\n    this.emit('playback:start');\n  }\n\n  public pause(): void {\n    if ((!this.isOpen) || (this.paused)) return null;\n    this.paused = true;\n    this.stopAudio();\n    this.emit('playback:stop');\n  }\n\n  public togglePlay(): void {\n    if (this.paused) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  }\n\n  public setFrame(frameIndex: number): void {\n    if ((this.isOpen) && (frameIndex !== this.currentFrame)) {\n      // clamp frame index\n      frameIndex = Math.max(0, Math.min(Math.floor(frameIndex), this.frameCount - 1));\n      this.drawFrame(frameIndex);\n      this._frame = frameIndex;\n      if (this.paused) {\n        this._time = frameIndex * (1 / this.framerate);\n        this.emit('progress', this.progress);\n      } else {\n        this.playFrameSe(frameIndex);\n      }\n      this.emit('frame:update', this.currentFrame);\n    }\n  }\n\n  public nextFrame(): void {\n    if ((this.loop) && (this.currentFrame >= this.frameCount -1)) {\n      this.currentFrame = 0;\n    } else {\n      this.currentFrame += 1;\n    }\n  }\n\n  public prevFrame(): void {\n    if ((this.loop) && (this.currentFrame <= 0)) {\n      this.currentFrame = this.frameCount - 1;\n    } else {\n      this.currentFrame -= 1;\n    }\n  }\n\n  public lastFrame(): void {\n    this.currentFrame = this.frameCount - 1;\n  }\n\n  public firstFrame(): void {\n    this.currentFrame = 0;\n  }\n\n  public thumbnailFrame(): void {\n    this.currentFrame = this.note.thumbFrameIndex;\n  }\n\n  public startSeek(): void {\n    if (!this.isSeeking) {\n      this.wasPlaying = !this.paused;\n      this.pause();\n      this.isSeeking = true;\n    }\n  }\n\n  public seek(progress: number): void {\n    if (this.isSeeking) {\n      this.progress = progress;\n    }\n  }\n\n  public endSeek(): void {\n    if ((this.isSeeking) && (this.wasPlaying === true)) {\n      this.play();\n    }\n    this.wasPlaying = false;\n    this.isSeeking = false;\n  }\n\n  public drawFrame(frameIndex: number): void {\n    const width = this.note.width;\n    const height = this.note.height;\n    const colors = this.note.getFramePalette(frameIndex);\n    const layerBuffers = this.note.decodeFrame(frameIndex);\n    this.canvas.setPaperColor(colors[0]);\n    this.canvas.clear();\n    if (this.note.type === 'PPM') {\n      if (this.layerVisibility[2]) {\n        this.canvas.drawLayer(layerBuffers[1], width, height, colors[2], [0,0,0,0]);\n      }\n      if (this.layerVisibility[1]) {\n        this.canvas.drawLayer(layerBuffers[0], width, height, colors[1], [0,0,0,0]);\n      }\n    } else if (this.note.type === 'KWZ') {\n      // loop through each layer\n      this.note.getLayerOrder(frameIndex).forEach((layerIndex: number) => {\n        // only draw layer if it's visible\n        if (this.layerVisibility[layerIndex + 1]) {\n          this.canvas.drawLayer(layerBuffers[layerIndex], width, height, colors[layerIndex * 2 + 1], colors[layerIndex * 2 + 2]);\n        }\n      });\n    }\n  }\n\n  public forceUpdate(): void {\n    if (this.isOpen) {\n      this.drawFrame(this.currentFrame);\n    }\n  }\n\n  private playFrameSe(frameIndex: number): void {\n    var flags = this.seFlags[frameIndex];\n    for (let i = 0; i < flags.length; i++) {\n      if (flags[i] && this.audioTracks[i].isActive) this.audioTracks[i].start();\n    }\n  }\n\n  private playBgm(): void {\n    this.audioTracks[4].start(this.currentTime);\n  }\n\n  private stopAudio(): void {\n    for (let i = 0; i < this.audioTracks.length; i++) {\n      this.audioTracks[i].stop();\n    }\n  }\n\n  public resize(width: number, height: number): void {\n    this.canvas.resize(width, height);\n    this.forceUpdate();\n  }\n\n  public setLayerVisibility(layerIndex: number, value: boolean): void {\n    this.layerVisibility[layerIndex] = value;\n    this.forceUpdate();\n  }\n\n  public toggleLayerVisibility(layerIndex: number) : void {\n    this.setLayerVisibility(layerIndex, !this.layerVisibility[layerIndex]);\n  }\n\n  // public setPalette(palette: any): void {\n  //   this.customPalette = palette;\n  //   this.note.palette = palette;\n  //   this.forceUpdate();\n  // }\n\n  public on(eventType: string, callback: Function): void {\n    const events = this.events;\n    (events[eventType] || (events[eventType] = [])).push(callback);\n  }\n\n  public off(eventType: string, callback: Function): void {\n    const callbackList = this.events[eventType];\n    if (callbackList) callbackList.splice(callbackList.indexOf(callback), 1);\n  }\n\n  public emit(eventType: string, ...args: any): void {\n    var callbackList = this.events[eventType] || [];\n    for (var i = 0; i < callbackList.length; i++) {\n      callbackList[i].apply(null, args); \n    }\n  }\n\n  public clearEvents(): void {\n    this.events = {};\n  }\n\n  public destroy(): void {\n    this.close();\n    this.canvas.destroy();\n  }\n\n}","import { createEventDispatcher } from 'svelte';\nimport { get_current_component } from 'svelte/internal';\n\nexport function createDomEventDispatcher() {\n  const component = get_current_component();\n  const svelteDispatch = createEventDispatcher();\n  return function (name: string, detail: any) {\n    svelteDispatch(name, detail);\n    component.dispatchEvent && component.dispatchEvent(new CustomEvent(name, { detail }));\n  }\n}\n\nexport function padNumber(num: number, strLength: number) {\n  return num.toString().padStart(strLength, '0');\n}\n\nexport function formatTime(seconds: number) {\n  const m = Math.floor((seconds % 3600) / 60);\n  const s = Math.round(seconds % 60);\n  return `${ m }:${ padNumber(s, 2) }`\n}\n\nexport function injectSvgStyle(svgString: string, styleString: string) {\n  return svgString.replace(/<svg ([^>]*)>/, (match, svgAttrs) => `<svg ${ svgAttrs } style=\"${ styleString }\">`);\n}","<svelte:options tag=\"flipnote-player-slider-bar\"/>\n\n<script>\n  import { createDomEventDispatcher } from './utils.ts';\n\n  export let value = 0;\n\n  let sliderElement; // will be bound to the progress bar element\n  let isSliderActive = false;\n\n  const dispatch = createDomEventDispatcher();\n\n  function onSliderInputStart(event) {\n    event.preventDefault();\n    isSliderActive = true;\n    onSliderInput(event);\n    dispatch('inputstart');\n  }\n\n  function onSliderInputEnd(event) {\n    event.preventDefault();\n    isSliderActive = false;\n    onSliderInput(event);\n    dispatch('inputend');\n  }\n\n  function onSliderInput(event) {\n    event.preventDefault();\n    const rect = sliderElement.getBoundingClientRect();\n    const railCap = rect.height / 2;\n    const railLength = rect.width - railCap * 2;\n    const x = event.pageX - rect.left - railCap;\n    const newValue = Math.max(0, Math.min(1, x / railLength));\n    if (value !== newValue) {\n      dispatch('change', {value: newValue});\n    }\n  }\n</script>\n\n<svelte:window\n  on:mousemove={ isSliderActive ? onSliderInput : null }\n  on:mouseup={ isSliderActive ? onSliderInputEnd : null }\n/>\n<div\n  class=\"PlayerSlider\"\n  on:mousedown={ onSliderInputStart }\n>\n  <div \n    class=\"PlayerSlider__track\" \n    bind:this={ sliderElement }\n  >\n    <div \n      class=\"PlayerSlider__level\"\n      style=\"width:{ value * 100 }%;\"\n    />\n    <div\n      class=\"PlayerSlider__handle\"\n      style=\"left:{ value * 100 }%;\"\n    />\n  </div>\n</div>\n\n<style>\n\n.PlayerSlider {\n  padding: 6px 0;\n}\n\n.PlayerSlider__track {\n  cursor: pointer;\n  position: relative;\n  flex: 1;\n  height: 4px;\n  border-radius: 3px;\n  margin: 6px 0;\n  background: var(--flipnote-player-slider-track, #FFD3A6);\n}\n\n.PlayerSlider__level {\n  position: absolute;\n  width: 100%;\n  /* min-width: 6px; */\n  height: 6px;\n  margin: -1px;\n  border-radius: 8px;\n  background: var(--flipnote-player-slider-level, #F36A2D);\n}\n.PlayerSlider__handle {\n  /* display: none; */\n  position: absolute;\n  top: 0;\n  height: 10px;\n  width: 4px;\n  margin-left: -2px;\n  margin-top: -3px;\n  border-radius: 2px;\n  background: var(--flipnote-player-slider-handle, #F36A2D);\n  /* box-shadow: 0 2px 3px 0 rgba(102, 102, 153, .62); */\n}\n\n/* .PlayerSlider:hover .PlayerSlider__handle {\n  display: block;\n} */\n</style>","<svelte:options tag=\"flipnote-player-icon\"/>\n\n<script>\nimport { injectSvgStyle } from './utils.ts';\nimport IconPlay from './icons/play.svg';\nimport IconPause from './icons/pause.svg';\nimport IconLoader from './icons/loader.svg';\nimport IconVolumeOn from './icons/volumeOn.svg';\nimport IconVolumeOff from './icons/volumeOff.svg';\n\nexport let icon = 'play';\n\n// Had to do a bit of a hack here since Svelte doesn't really like you importing SVGs and stlying them\n// SVGs are imported as SVGO-optimised XML strings, and then inline styles get injected into their root tag\n\nconst style = 'fill:currentColor';\n\nconst iconMap = {\n  play: injectSvgStyle(IconPlay, style),\n  pause: injectSvgStyle(IconPause, style),\n  loader: injectSvgStyle(IconLoader, style),\n  volumeOn: injectSvgStyle(IconVolumeOn, style),\n  volumeOff: injectSvgStyle(IconVolumeOff, style),\n}\n</script>\n\n<div class=\"PlayerIcon\">\n  {@html iconMap[icon]}\n</div>\n\n<style>\n.PlayerIcon {\n  width: 100%;\n  height: 100%;\n  color: var(--flipnote-player-icon-color, #F36A2D);\n}\n</style>\n","<svelte:options\n  tag={ null }\n  accessors={ true }\n/>\n\n<script>\n  import { onMount } from 'svelte';\n  import { Player as FlipnotePlayer } from '../player/index.ts';\n  import { createDomEventDispatcher, padNumber, formatTime } from './utils.ts';\n  import './Slider.svelte';\n  import './Icon.svelte';\n\n  export let src = null;\n  export let controls = 'default';\n  export let timeformat = 'frames';\n  export let muted = false;\n\n  let player; // will be bound to flipnote player object\n  let canvasElement; // will be bound to the canvas element\n  let progress = 0;\n  let currentFrame = 0;\n  let totalFrames = 0;\n  let currentTime = 0;\n  let duration = 0;\n  let isPlaying = false;\n  let volume = 1;\n  let isMuted = false;\n  let timeString = '';\n\n  onMount(() => {\n    player = new FlipnotePlayer(canvasElement, 256, 192);\n    player.on('load', () => {\n      totalFrames = player.frameCount;\n      duration = player.duration;\n      volume = player.volume;\n      player.muted = muted;\n    });\n    player.on('progress', (playbackProgress) => {\n      progress = playbackProgress;\n      currentTime = player.currentTime;\n    });\n    player.on('playback:start', () => {\n      isPlaying = true;\n    });\n    player.on('playback:stop', () => {\n      isPlaying = false;\n    });\n    player.on('frame:update', () => {\n      currentFrame = player.currentFrame + 1;\n    });\n  });\n\n  async function loadSource(src) {\n    await player.open(src);\n  }\n\n  function handleProgressBarInputStart(event) {\n    player && player.startSeek();\n  }\n\n  function handleProgressBarChange(event) {\n    const { value } = event.detail;\n    player && player.seek(value * 100);\n  }\n\n  function handleProgressBarInputEnd(event) {\n    player && player.endSeek();\n  }\n\n  function handleVolumeBarChange(event) {\n    const { value } = event.detail;\n    if (player) {\n      player.volume = value;\n      volume = value;\n      if (volume > 0 && muted) muted = false;\n    }\n  }\n  \n  function togglePlay() {\n    player && player.togglePlay();\n  }\n\n  function toggleMute() {\n    muted = !muted;\n  }\n\n  let flipnoteLoader = new Promise((resolve, reject) => reject());\n\n  $: if (src) {\n    flipnoteLoader = loadSource(src);\n  }\n\n  $: {\n    if (player) {\n      player.muted = muted;\n    }\n  }\n\n  $: {\n    if (timeformat === 'time') {\n      timeString = `${ formatTime(currentTime) } / ${ formatTime(duration) }`\n    } else { // default is 'frames'\n      timeString = `${ padNumber(currentFrame, 3) } / ${ padNumber(totalFrames, 3) }`\n    }\n  }\n</script>\n\n<div class=\"FlipnotePlayer\">\n  <div class=\"FlipnotePlayer__canvasArea\" width=\"256px\" height=\"192px\">\n    <canvas\n      class=\"FlipnotePlayer__canvas\"\n      bind:this={ canvasElement }\n      on:click={ togglePlay }\n    />\n    {#await flipnoteLoader}\n      <div class=\"FlipnotePlayer__overlay\">\n        <flipnote-player-icon icon=\"loader\" class=\"FlipnotePlayer__loaderIcon\"/>\n      </div>\n    {:catch error}\n      <div class=\"FlipnotePlayer__overlay\">\n        Error\n      </div>\n    {/await}\n  </div>\n  {#if controls === 'compact'}\n    <div class=\"FlipnotePlayerControls FlipnotePlayerControls--compact FlipnotePlayerControls__row\">\n      <button\n        on:click={ togglePlay }\n        class=\"Button FlipnotePlayerControls__playButton\"\n      >\n        <flipnote-player-icon icon={ isPlaying ? 'pause' : 'play' }/>\n      </button>\n      <flipnote-player-slider-bar\n        class=\"FlipnotePlayerControls__progressBar\"\n        value={progress / 100}\n        on:change={handleProgressBarChange}\n        on:inputstart={handleProgressBarInputStart}\n        on:inputend={handleProgressBarInputEnd}\n      />\n    </div>\n  {:else if controls === 'default'}\n    <div class=\"FlipnotePlayerControls FlipnotePlayerControls--default\">\n      <flipnote-player-slider-bar\n        class=\"FlipnotePlayerControls__progressBar\"\n        value={progress / 100}\n        on:change={handleProgressBarChange}\n        on:inputstart={handleProgressBarInputStart}\n        on:inputend={handleProgressBarInputEnd}\n      />\n      <div class=\"FlipnotePlayerControls__row\">\n        <div class=\"FlipnotePlayerControls__groupLeft\">\n          <button class=\"Button FlipnotePlayerControls__playButton\" on:click={ togglePlay }>\n            <flipnote-player-icon icon={ isPlaying ? 'pause' : 'play' }/>\n          </button>\n          <span class=\"FlipnotePlayerControls__frameCounter\">\n            { timeString }\n          </span>\n        </div>\n        <div class=\"FlipnotePlayerControls__groupRight\">\n          <flipnote-player-icon \n            class=\"FlipnotePlayerControls__muteIcon\"\n            on:click={ toggleMute }\n            icon={ (muted || volume === 0) ? 'volumeOff' : 'volumeOn' }\n          />\n          <flipnote-player-slider-bar\n            class=\"FlipnotePlayerControls__volumeBar\"\n            value={ muted ? 0 : volume }\n            on:change={ handleVolumeBarChange }\n          />\n        </div>\n      </div>\n    </div>\n  {:else if controls === 'full'}\n    <div class=\"FlipnotePlayerControls FlipnotePlayerControls--full\">\n      todo :)\n    </div>\n  {/if}\n</div>\n\n<style>\n\n  .Button {\n    border: 0;\n    padding: 0;\n    outline: 0;\n    -webkit-appearance: none;\n    display: block;\n    font-family: inherit;\n    font-size: inherit;\n    text-align: center;\n    cursor: pointer;\n    background: var(--flipnote-player-button-background, #FFD3A6);\n    color: var(--flipnote-player-button-color, #F36A2D);\n    border-radius: 4px;\n  }\n\n  .Button flipnote-player-icon {\n    display: block;\n  }\n\n  .FlipnotePlayer {\n    display: inline-block;\n    font-family: var(--flipnote-player-font-family, sans-serif);\n    /* user-select: none; */\n  }\n\n  .FlipnotePlayer__canvasArea {\n    position: relative;\n  }\n\n  .FlipnotePlayer__canvas {\n    position: relative;\n  }\n\n  .FlipnotePlayer__overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    background: #e5e5e9;\n    color: #4b4c53;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  @keyframes spin {\n    from {\n      transform: rotateZ(0);\n    }\n    to {\n      transform: rotateZ(360deg);\n    }\n  }\n\n  .FlipnotePlayer__loaderIcon {\n    animation: spin infinite 1.2s linear;\n  }\n\n  .FlipnotePlayerControls {\n    background: var(--flipnote-player-controls-background, none);\n  }\n\n  .FlipnotePlayerControls__muteIcon {\n    width: 28px;\n    height: 28px;\n  }\n\n  .FlipnotePlayerControls__row,\n  .FlipnotePlayerControls__groupLeft,\n  .FlipnotePlayerControls__groupRight {\n    display: flex;\n    align-items: center;\n  }\n\n  .FlipnotePlayerControls__groupLeft {\n    margin-right: auto;\n  }\n\n  .FlipnotePlayerControls__groupRight {\n    margin-left: auto;\n  }\n\n  .FlipnotePlayerControls__playButton {\n    height: 32px;\n    width: 32px;\n    padding: 2px;\n  }\n\n  .FlipnotePlayerControls__frameCounter {\n    font-variant-numeric: tabular-nums;\n  }\n\n  .FlipnotePlayerControls--compact .FlipnotePlayerControls__playButton {\n    margin-right: 12px;\n  }\n\n  .FlipnotePlayerControls--compact .FlipnotePlayerControls__progressBar {\n    flex: 1;\n  }\n\n  .FlipnotePlayerControls--default .FlipnotePlayerControls__playButton {\n    margin-right: 8px;\n  }\n\n  .FlipnotePlayerControls--default .FlipnotePlayerControls__volumeBar {\n    width: 70px;\n    margin-left: 8px;\n  }\n</style>\n","import { ByteArray } from '../utils/byteArray';\n\n/*\n  LZWEncoder.js\n\n  Authors\n  Kevin Weiner (original Java version - kweiner@fmsware.com)\n  Thibault Imbert (AS3 version - bytearray.org)\n  Johan Nordberg (JS version - code@johan-nordberg.com)\n  James Daniel (ES6/TS version)\n\n  Acknowledgements\n  GIFCOMPR.C - GIF Image compression routines\n  Lempel-Ziv compression based on 'compress'. GIF modifications by\n  David Rowley (mgardi@watdcsu.waterloo.edu)\n  GIF Image compression - modified 'compress'\n  Based on: compress.c - File compression ala IEEE Computer, June 1984.\n  By Authors: Spencer W. Thomas (decvax!harpo!utah-cs!utah-gr!thomas)\n  Jim McKie (decvax!mcvax!jim)\n  Steve Davies (decvax!vax135!petsd!peora!srd)\n  Ken Turkowski (decvax!decwrl!turtlevax!ken)\n  James A. Woods (decvax!ihnp4!ames!jaw)\n  Joe Orost (decvax!vax135!petsd!joe)\n*/\n\nconst EOF = -1;\nconst BITS = 12;\nconst HSIZE = 5003; // 80% occupancy\nconst masks = [\n  0x0000, 0x0001, 0x0003, 0x0007, 0x000F, 0x001F,\n  0x003F, 0x007F, 0x00FF, 0x01FF, 0x03FF, 0x07FF,\n  0x0FFF, 0x1FFF, 0x3FFF, 0x7FFF, 0xFFFF\n];\n\nexport class LZWEncoder {\n  public width: number;\n  public height: number;\n  public pixels: Uint8Array;\n  public colorDepth: number;\n\n  private initCodeSize: number;\n  private accum = new Uint8Array(256);\n  private htab = new Int32Array(HSIZE);\n  private codetab = new Int32Array(HSIZE);\n  private cur_accum = 0;\n  private cur_bits = 0;\n  private n_bits: number;\n  private a_count: number;\n  private remaining: number;\n  private curPixel = 0;\n  private free_ent = 0; // first unused entry\n  private maxcode: number;\n  // block compression parameters -- after all codes are used up,\n  // and compression rate changes, start over.\n  private clear_flg: boolean = false;\n  // Algorithm: use open addressing double hashing (no chaining) on the\n  // prefix code / next character combination. We do a variant of Knuth's\n  // algorithm D (vol. 3, sec. 6.4) along with G. Knott's relatively-prime\n  // secondary probe. Here, the modular division first probe is gives way\n  // to a faster exclusive-or manipulation. Also do block compression with\n  // an adaptive reset, whereby the code table is cleared when the compression\n  // ratio decreases, but after the table fills. The variable-length output\n  // codes are re-sized at this point, and a special CLEAR code is generated\n  // for the decompressor. Late addition: construct the table according to\n  // file size for noticeable speed improvement on small files. Please direct\n  // questions about this implementation to ames!jaw.\n  private g_init_bits: number = undefined;\n  private ClearCode: number = undefined;\n  private EOFCode: number = undefined;\n\n  constructor(width: number, height: number, pixels: Uint8Array, colorDepth: number) {\n    this.width = width;\n    this.height = height;\n    this.pixels = pixels;\n    this.colorDepth = colorDepth;\n    this.initCodeSize = Math.max(2, this.colorDepth);\n    this.accum = new Uint8Array(256);\n    this.htab = new Int32Array(HSIZE);\n    this.codetab = new Int32Array(HSIZE);\n    this.cur_accum = 0;\n    this.cur_bits = 0;\n    this.a_count;\n    this.remaining;\n    this.curPixel = 0;\n    this.free_ent = 0; // first unused entry\n    this.maxcode;\n    // block compression parameters -- after all codes are used up,\n    // and compression rate changes, start over.\n    this.clear_flg = false;\n    // Algorithm: use open addressing double hashing (no chaining) on the\n    // prefix code / next character combination. We do a variant of Knuth's\n    // algorithm D (vol. 3, sec. 6.4) along with G. Knott's relatively-prime\n    // secondary probe. Here, the modular division first probe is gives way\n    // to a faster exclusive-or manipulation. Also do block compression with\n    // an adaptive reset, whereby the code table is cleared when the compression\n    // ratio decreases, but after the table fills. The variable-length output\n    // codes are re-sized at this point, and a special CLEAR code is generated\n    // for the decompressor. Late addition: construct the table according to\n    // file size for noticeable speed improvement on small files. Please direct\n    // questions about this implementation to ames!jaw.\n    this.g_init_bits = undefined;\n    this.ClearCode = undefined;\n    this.EOFCode = undefined;\n  }\n\n  // Add a character to the end of the current packet, and if it is 254\n  // characters, flush the packet to disk.\n  char_out(c: number, outs: ByteArray) {\n    this.accum[this.a_count++] = c;\n    if (this.a_count >= 254) this.flush_char(outs);\n  }\n\n  // Clear out the hash table\n  // table clear for block compress\n  cl_block(outs: ByteArray) {\n    this.cl_hash(HSIZE);\n    this.free_ent = this.ClearCode + 2;\n    this.clear_flg = true;\n    this.output(this.ClearCode, outs);\n  }\n\n  // Reset code table\n  cl_hash(hsize: number) {\n    for (var i = 0; i < hsize; ++i) this.htab[i] = -1;\n  }\n\n  compress(init_bits: number, outs: ByteArray) {\n    var fcode, c, i, ent, disp, hsize_reg, hshift;\n\n    // Set up the globals: this.g_init_bits - initial number of bits\n    this.g_init_bits = init_bits;\n\n    // Set up the necessary values\n    this.clear_flg = false;\n    this.n_bits = this.g_init_bits;\n    this.maxcode = this.get_maxcode(this.n_bits);\n\n    this.ClearCode = 1 << (init_bits - 1);\n    this.EOFCode = this.ClearCode + 1;\n    this.free_ent = this.ClearCode + 2;\n\n    this.a_count = 0; // clear packet\n\n    ent = this.nextPixel();\n\n    hshift = 0;\n    for (fcode = HSIZE; fcode < 65536; fcode *= 2) ++hshift;\n    hshift = 8 - hshift; // set hash code range bound\n    hsize_reg = HSIZE;\n    this.cl_hash(hsize_reg); // clear hash table\n\n    this.output(this.ClearCode, outs);\n\n    outer_loop: while ((c = this.nextPixel()) != EOF) {\n      fcode = (c << BITS) + ent;\n      i = (c << hshift) ^ ent; // xor hashing\n      if (this.htab[i] === fcode) {\n        ent = this.codetab[i];\n        continue;\n      } else if (this.htab[i] >= 0) { // non-empty slot\n        disp = hsize_reg - i; // secondary hash (after G. Knott)\n        if (i === 0) disp = 1;\n        do {\n          if ((i -= disp) < 0) i += hsize_reg;\n          if (this.htab[i] === fcode) {\n            ent = this.codetab[i];\n            continue outer_loop;\n          }\n        } while (this.htab[i] >= 0);\n      }\n      this.output(ent, outs);\n      ent = c;\n      if (this.free_ent < 1 << BITS) {\n        this.codetab[i] = this.free_ent++; // code -> hasthis.htable\n        this.htab[i] = fcode;\n      } else {\n        this.cl_block(outs);\n      }\n    }\n\n    // Put out the final code.\n    this.output(ent, outs);\n    this.output(this.EOFCode, outs);\n  }\n\n  encode(outs: ByteArray) {\n    outs.writeByte(this.initCodeSize); // write 'initial code size' byte\n    this.remaining = this.width * this.height; // reset navigation variables\n    this.curPixel = 0;\n    this.compress(this.initCodeSize + 1, outs); // compress and write the pixel data\n    outs.writeByte(0); // write block terminator\n  }\n\n  // Flush the packet to disk, and reset the this.accumulator\n  flush_char(outs: ByteArray) {\n    if (this.a_count > 0) {\n      outs.writeByte(this.a_count);\n      outs.writeBytes(this.accum, 0, this.a_count);\n      this.a_count = 0;\n    }\n  }\n\n  get_maxcode(n_bits: number) {\n    return (1 << n_bits) - 1;\n  }\n\n  // Return the next pixel from the image\n  nextPixel() {\n    if (this.remaining === 0) return EOF;\n    --this.remaining;\n    var pix = this.pixels[this.curPixel++];\n    return pix & 0xff;\n  }\n\n  output(code: number, outs: ByteArray) {\n    this.cur_accum &= masks[this.cur_bits];\n\n    if (this.cur_bits > 0) this.cur_accum |= (code << this.cur_bits);\n    else this.cur_accum = code;\n\n    this.cur_bits += this.n_bits;\n\n    while (this.cur_bits >= 8) {\n      this.char_out((this.cur_accum & 0xff), outs);\n      this.cur_accum >>= 8;\n      this.cur_bits -= 8;\n    }\n\n    // If the next entry is going to be too big for the code size,\n    // then increase it, if possible.\n    if (this.free_ent > this.maxcode || this.clear_flg) {\n      if (this.clear_flg) {\n        this.maxcode = this.get_maxcode(this.n_bits = this.g_init_bits);\n        this.clear_flg = false;\n      } else {\n        ++this.n_bits;\n        if (this.n_bits == BITS) this.maxcode = 1 << BITS;\n        else this.maxcode = this.get_maxcode(this.n_bits);\n      }\n    }\n\n    if (code == this.EOFCode) {\n      // At EOF, write the rest of the buffer.\n      while (this.cur_bits > 0) {\n        this.char_out((this.cur_accum & 0xff), outs);\n        this.cur_accum >>= 8;\n        this.cur_bits -= 8;\n      }\n      this.flush_char(outs);\n    }\n  }\n}\n","import { DataStream, ByteArray } from '../utils/index';\nimport { LZWEncoder } from './lzw';\nimport { Flipnote } from '../parsers/index';\n\nexport class GifEncoder {\n\n  public width: number;\n  public height: number;\n  public delay: number = 100;\n  // -1 = no repeat, 0 = forever. anything else is repeat count\n  public repeat: number = -1;\n  public colorDepth: number = 8;\n  public palette: number[][] = [];\n  public data: ByteArray;\n\n  constructor(width: number, height: number) {\n    this.width = width;\n    this.height = height;\n    this.data = new ByteArray();\n  }\n\n  static fromFlipnote(flipnote: Flipnote) {\n    const gif = new GifEncoder(flipnote.width, flipnote.height);\n    gif.palette = flipnote.globalPalette;\n    gif.delay = 100 / flipnote.framerate\n    gif.repeat = flipnote.meta.loop ? -1 : 0;\n    gif.init();\n    for (let frameIndex = 0; frameIndex < flipnote.frameCount; frameIndex++) {\n      gif.writeFrame(flipnote.getFramePixels(frameIndex));\n    }\n    return gif;\n  }\n\n  static fromFlipnoteFrame(flipnote: Flipnote, frameIndex: number) {\n    const gif = new GifEncoder(flipnote.width, flipnote.height);\n    gif.palette = flipnote.globalPalette;\n    gif.delay = 100 / flipnote.framerate\n    gif.repeat = flipnote.meta.loop ? -1 : 0;\n    gif.init();\n    gif.writeFrame(flipnote.getFramePixels(frameIndex));\n    return gif;\n  }\n\n  init() {\n    const paletteSize = this.palette.length;\n    for (var p = 1; 1 << p < paletteSize; p += 1) {\n      continue;\n    }\n    this.colorDepth = p;\n    this.writeHeader();\n    this.writeColorTable();\n    this.writeNetscapeExt();\n  }\n\n  writeHeader() {\n    const header = new DataStream(new ArrayBuffer(13));\n    header.writeUtf8('GIF89a');\n    // Logical Screen Descriptor\n    header.writeUint16(this.width);\n    header.writeUint16(this.height);\n    header.writeUint8(\n      0x80 | // 1 : global color table flag = 1 (gct used)\n      (this.colorDepth - 1) // 6-8 : gct size\n    );\n    header.writeUint8(0);\n    header.writeUint8(0);\n    this.data.writeBytes(new Uint8Array(header.buffer));\n  }\n\n  writeColorTable() {\n    const palette = new Uint8Array(3 * Math.pow(2, this.colorDepth));\n    for(let index = 0, offset = 0; index < this.palette.length; index += 1, offset += 3) {\n      palette.set(this.palette[index], offset);\n    }\n    this.data.writeBytes(palette);\n  }\n\n  writeGraphicsControlExt() {\n    const graphicsControlExt = new DataStream(new ArrayBuffer(8));\n    graphicsControlExt.writeBytes([\n      0x21, // extension introducer\n      0xF9, // graphic control label\n      4, // block size\n      0 // bitfield\n    ]);\n    graphicsControlExt.writeUint16(this.delay); // loop flag\n    graphicsControlExt.writeBytes([\n      0,\n      0\n    ]);\n    this.data.writeBytes(new Uint8Array(graphicsControlExt.buffer));\n  }\n\n  writeNetscapeExt() {\n    const netscapeExt = new DataStream(new ArrayBuffer(19));\n    netscapeExt.writeBytes([\n      0x21, // extension introducer\n      0xFF, // app extension label\n      11, // block size\n    ]);\n    netscapeExt.writeUtf8('NETSCAPE2.0');\n    netscapeExt.writeUint8(3); // subblock size\n    netscapeExt.writeUint8(1); // loop subblock id\n    netscapeExt.writeUint16(this.repeat); // loop flag\n    this.data.writeBytes(new Uint8Array(netscapeExt.buffer));\n  }\n\n  writeImageDesc() {\n    const desc = new DataStream(new ArrayBuffer(10));\n    desc.writeUint8(0x2C);\n    desc.writeUint16(0); // image left\n    desc.writeUint16(0); // image top\n    desc.writeUint16(this.width);\n    desc.writeUint16(this.height);\n    desc.writeUint8(0);\n    this.data.writeBytes(new Uint8Array(desc.buffer));\n  }\n\n  writePixels(pixels: Uint8Array) {\n    const lzw = new LZWEncoder(this.width, this.height, pixels, this.colorDepth);\n    lzw.encode(this.data);\n  }\n\n  writeFrame(pixels: Uint8Array) {\n    this.writeGraphicsControlExt();\n    this.writeImageDesc();\n    this.writePixels(pixels);\n  }\n\n  getBuffer() {\n    return this.data.getBuffer();\n  }\n\n  getBlob() {\n    return new Blob([this.getBuffer()], {type: 'image/gif'})\n  }\n\n  getUrl() {\n    return window.URL.createObjectURL(this.getBlob());\n  }\n\n  getImage() {\n    const img = new Image(this.width, this.height);\n    img.src = this.getUrl();\n    return img;\n  }\n}","// Main entrypoint for web\n\nimport {\n  parseSource as _parseSource,\n  Flipnote as _Flipnote,\n  FlipnoteMeta as _FlipnoteMeta,\n  FlipnoteAudioTrack as _FlipnoteAudioTrack,\n  KwzParser,\n  PpmParser,\n} from './parsers/index';\n\nimport {\n  Player\n} from './player/index';\n\nimport {\n  GifEncoder,\n  WavEncoder,\n  // bitmap encoder is deprecated in favor of gif\n  // BitmapEncoder\n} from './encoders/index';\n\nnamespace api {\n  export const version = VERSION; // replaced by @rollup/plugin-replace; see rollup.config.js\n\n  export type Flipnpte = _Flipnote;\n  export type FlipnoteMeta = _FlipnoteMeta;\n  export type FlipnoteAudioTrack = _FlipnoteAudioTrack;\n  \n  export const player = Player;\n  export const parseSource = _parseSource;\n  export const kwzParser = KwzParser;\n  export const ppmParser = PpmParser;\n  export const gifEncoder = GifEncoder;\n  export const wavEncoder = WavEncoder;\n}\n\nexport default api;\n\nexport const version = VERSION;\n\nexport type Flipnpte = _Flipnote;\nexport type FlipnoteMeta = _FlipnoteMeta;\nexport type FlipnoteAudioTrack = _FlipnoteAudioTrack;\n\nexport const player = Player;\nexport const parseSource = _parseSource;\nexport const kwzParser = KwzParser;\nexport const ppmParser = PpmParser;\nexport const gifEncoder = GifEncoder;\nexport const wavEncoder = WavEncoder;","// Entrypoint for webcomponent build\n\nimport PlayerComponent from './components/Player.svelte';\nexport * from './flipnote'; // make sure regular flipnote.js api is available on window.flipnote\n\n// https://svelte.dev/docs#Custom_element_API\n// Had to do a hacky type coercion fix to get this to compile without complaints :/\ncustomElements.define('flipnote-player', PlayerComponent as unknown as CustomElementConstructor);\n\nexport const playerComponent = PlayerComponent; // adds window.flipnote.playerComponent"],"names":["FRAMERATES","PALETTE","FlipnotePlayer","_parseSource","parseSource","PlayerComponent"],"mappings":"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"}